{"version":3,"sources":["components/firebase.js","components/cookieHelper.js","components/activity.js","components/loader.js","components/icons/icons.js","views/activities.js","views/login.js","views/handleRedirect.js","components/nav.js","components/chart.js","components/mapbox.js","components/foodCard.js","views/activityDetail.js","components/favouriteButton.js","components/publishButton.js","components/activityHeader.js","components/activityHeaderPublic.js","views/publicActivityDetail.js","views/favouriteActivities.js","views/yearToDate.js","views/home.js","components/footer.js","App.js","index.js"],"names":["fire","firebase","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","setCookie","cname","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","document","cookie","getCookie","name","ca","decodeURIComponent","split","i","length","c","charAt","substring","indexOf","ActivityMap","props","mapDimension","imageUrl","mapPolyline","className","src","alt","ActivityIsCommute","commute","ActivityStat","label","type","value","unit","ActivityName","Link","to","data","id","format","start_date","Activity","activityDistance","Math","floor","this","distance","activityAverageSpeed","_","round","average_speed","activityTotalElevationGain","total_elevation_gain","activityMovingTime","MomentJS","duration","moving_time","activityMovingTimeHHMMSS","_data","hours","minutes","seconds","map","summary_polyline","favourite","has_heartrate","average_cadence","device_watts","Component","LoadingSpinner","path","querySelector","pathLength","getTotalLength","style","strokeDasharray","strokeDashoffset","width","height","viewBox","fill","xmlns","stroke","strokeWidth","strokeLinecap","IconArrowRight","fill-rule","IconArrowLeft","IconBookmarkSolid","IconCloud","stroke-linejoin","Paginator","pager","currentPage","href","previousPage","isLastPage","nextPage","Activities","checkFavouriteStatus","fetchData","userAccessToken","page","match","params","fetch","method","headers","authorization","then","response","json","setState","loading","isFirstPage","Number","state","userUid","favouritesList","database","ref","once","snapshot","forEach","child","favouriteActivityId","val","push","activities","activity","index","isFavourite","includes","String","key","transitionName","transitionAppear","transitionAppearTimeout","transitionEnterTimeout","transitionLeaveTimeout","authUrl","assetSrc","firebaseToken","refreshToken","accessTokenExpiresAt","Login","Nav","authState","activeClassName","aria-label","role","NavLink","exact","NavigationProfile","logout","deleteCookie","auth","signOut","window","location","assign","catch","error","showDropdown","onClick","profile","firstname","lastname","country","city","HandleRedirect","token","search","query","JSON","parse","decodeURI","replace","console","log","access_token","firebase_token","refresh_token","expires_at","setTokensFromUrl","signInWithCustomToken","code","message","onAuthStateChanged","user","uid","Redirect","defaults","global","elements","point","borderWidth","radius","backgroundColor","line","tension","defaultFontFamily","ActivityChart","options","distanceStreamKm","distanceStream","m","dataType","labels","datasets","dataTypeLegendLabel","borderColor","yAxisID","mainDataStream","altitudeStream","layout","padding","responsive","maintainAspectRatio","legend","display","usePointStyle","position","boxWidth","tooltips","mode","intersect","displayColors","xPadding","yPadding","hover","animationDuration","scales","xAxes","ticks","fontSize","autoSkipPadding","maxRotation","callback","stepSize","yAxes","autoSkip","fontColor","dataTypeUnit","pointRadius","pointBorderWidth","showLine","pointBackgroundColor","cubicInterpolationMode","latLngCircleSize","latLngCircleOpacity","MapboxMap","decodedPolylineArray","polyline","toGeoJSON","coordinates","startLatlng","endLatlng","mapboxgl","accessToken","Map","container","center","zoom","on","addLayer","bounds","reduce","coord","extend","LngLatBounds","fitBounds","addControl","NavigationControl","scrollZoom","disable","popup","Popup","closeButton","closeOnClick","e","getCanvas","cursor","setLngLat","features","geometry","setHTML","properties","description","addTo","remove","x","ActivityFoodCard","activityTotalCalories","activityMovingTimeHour","activityMovingTimeMinutes","activityMovingTimeSeconds","activityMaxSpeed","activityAverageCadence","activityAverageHeartRate","activityAverageWatts","activityMaxWatts","activityMaxHeartRate","activityDeviceWatts","foodBurnedBanana","foodBurnedBeers","foodBurnedCookies","foodBurnedCheeseburgers","foodBurnedCadburyChocolate","foodBurnedPizzaSlice","imageSrc","FavouriteButton","checkStatus","favouritesRef","activityId","unfavouriteThis","favouriteThis","newFavouriteRef","set","activityData","disabled","PublishButton","publicActivitiesRef","isPublic","removeFromPublicStream","addToPublicStream","newPublicActivity","latLngStream","velocityStream","cadenceStream","heartrateStream","wattsStream","target","rel","ActivityHeader","ActivityDetail","downloadSpeedChart","copyNode","getElementById","domtoimage","toBlob","blob","fileSaver","saveAs","downloadHeartrateChart","downloadCadenceChart","Promise","resolve","reject","Error","gear","athlete","chartData","thisActivityApiUrl","thisActivityStreamApiUrl","findDistance","array","findHeartrate","findAltitude","findLatlng","findCadence","findVelocity","findWatts","find","velocityStreamArray","velocityKPH","toKPH","calories","max_speed","average_watts","max_watts","average_heartrate","max_heartrate","start_latlng","end_latlng","AthleteProfile","athleteData","ActivityHeaderPublic","PublicActivityDetail","fetchAthleteData","res","athleteId","activityFound","athleteUID","snap","publicActivityId","publicActivityData","publicActivityAltitudeStream","publicActivityCadenceStream","publicActivityDistanceStream","publicActivityHeartrateStream","publicActivityLatLngStream","publicActivityVelocityStream","publicActivityWattsStream","EmptyFavourites","FavouriteActivities","allFavourites","reverse","YearToDate","totals","ytdRideTotals","ytdRunTotals","ytdSwimTotals","totalsApiUrl","ytd_ride_totals","ytd_run_totals","ytd_swim_totals","ytdRideDistance","ytdRideElevationGain","elevation_gain","ytdRideMovingTime","mountEverestUnit","ScrollHint","title","YearToDateStat","_handleWaypointEnter","counted","startAnimation","myCountUp","bottomOffset","onEnter","separator","start","end","countUp","version","Homepage","Footer","NoMatch","App","loggedIn","userMeasurementPreference","currentTime","now","parseInt","Switch","Route","component","render","routeProps","Home","ReactDOM"],"mappings":"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","file":"static/js/main.69fa27d7.chunk.js","sourcesContent":["import * as firebase from \"firebase\";\n\nconst config = {\n  apiKey: \"AIzaSyAT-v8o3B_cYtmaQOcOAaZypeXQC4W1lH8\",\n  authDomain: \"banana-dd8f3.firebaseapp.com\",\n  databaseURL: \"https://banana-dd8f3.firebaseio.com\",\n  projectId: \"banana-dd8f3\",\n  storageBucket: \"banana-dd8f3.appspot.com\",\n  messagingSenderId: \"33006064885\"\n};\n\nconst fire = firebase.initializeApp(config);\n\nconst getUserStatus = () => {\n  return new Promise((resolve, reject) => {\n    fire.auth().onAuthStateChanged(function(user) {\n      if (user) {\n        resolve(user.uid);\n      } else {\n        reject(Error(\"It broke\"));\n      }\n    });\n  });\n};\n\nexport { getUserStatus, fire };\n","let setCookie = (cname, cvalue, exdays) => {\n  let d = new Date();\n  d.setTime(d.getTime() + (exdays*24*60*60*1000));\n  let expires = \"expires=\" + d.toUTCString();\n  document.cookie = cname + '=' + cvalue + ';' + expires + ';path=/'\n}\n\nlet getCookie = (cname) => {\n  let name = cname + '=';\n  let decodedCookie = decodeURIComponent(document.cookie);\n  let ca = decodedCookie.split(';')\n  for(var i = 0; i <ca.length; i++) {\n      var c = ca[i];\n      // Clean up messy cookie values\n      while (c.charAt(0) === ' ') {\n        c = c.substring(1);\n      }\n      // if the name in argument matches cookie name\n      if (c.indexOf(name) === 0) {\n        return c.substring(name.length, c.length);\n      }\n  }\n  return \"\";\n}\n\nlet deleteCookie = (cname) => {\n  let d = new Date();\n  d.setTime(d.getTime() - (10*24*60*60*1000));\n  let expires = \"expires=\" + d.toUTCString();\n  document.cookie = 'access_token=;path=/;' + expires\n}\n\nexport {\n  setCookie,\n  getCookie,\n  deleteCookie\n}\n","import React, { Component } from 'react';\nimport Moment from 'react-moment';\nimport { Link } from 'react-router-dom';\nimport MomentJS from 'moment'\nimport _ from 'lodash';\n\nconst googleApiKey = 'AIzaSyAsyxYCjxLqi49yGUuqUJRa4cYN8V4VyLE'\n\n// Google map style wizard: https://mapstyle.withgoogle.com/\n\n\nfunction ActivityMap(props) {\n  let pathWeight = 4;\n  let pathColor = '0x3B8BFFff';\n  let mapDimension = props.mapDimension || '400x400';\n  let mapStyle = \"&format=png&maptype=roadmap&style=feature:water%7Celement:geometry.fill%7Ccolor:0x75cff0&size=\";\n\n  let imageUrl = \"https://maps.googleapis.com/maps/api/staticmap?key=\"+ googleApiKey + \"&path=weight:\"+ pathWeight +\"%7Ccolor:\"+ pathColor + \"%7Cenc:\" + props.mapPolyline +  mapStyle + mapDimension;\n\n  if(props.mapPolyline) {\n    return(\n      <div className=\"c-activity-map\">\n        <img className=\"c-activity-map__image\" src={ imageUrl } alt=\"\"/>\n      </div>\n    )\n  } else {\n    return(\n      <div className=\"c-activity-map\">\n        <span className=\"c-activity-map__message\">No Location Information</span>\n      </div>\n    )\n  }\n\n}\n\nfunction ActivityIsCommute(props){\n  if(props.commute){\n    return(\n        <span className=\"c-label c-label--sm\">commute</span>\n    )\n  } else {\n    return(\n      null\n    )\n  }\n}\n\nfunction ActivityStat(props){\n  return(\n    <div className=\"c-activity__stat\">\n      <label className=\"c-activity__stat-label\">{props.label}</label>\n      <span className={`\n        c-activity__stat-value\n        ${props.type ? 'c-activity__stat-value--' + props.type: ''}\n        `}\n        >\n        {props.value}\n      <span className=\"c-activity__stat-unit\">{props.unit}</span></span>\n    </div>\n  )\n}\n\nfunction ActivityName(props){\n  return(\n    <div>\n      <div className=\"c-activity__header\">\n        <div>\n          <h3 className=\"c-activity__title\">\n            <Link to={'/activities/'+ props.data.id}>\n              {props.data.name}\n            </Link>\n          </h3>\n          <span className='c-activity__time'>\n            <Moment format=\"MMM DD, YYYY\">{props.data.start_date}</Moment> at <Moment format=\"hh:mm a\">{props.data.start_date}</Moment>\n          </span>\n        </div>\n        <ActivityIsCommute commute={props.data.commute} />\n      </div>\n    </div>\n  )\n}\n\nclass Activity extends Component {\n\n  render(){\n    let activityDistance = Math.floor(this.props.data.distance/1000)\n    let activityAverageSpeed = _.round((this.props.data.average_speed * 60 * 60) / 1000, 1)\n    let activityTotalElevationGain = Math.floor(this.props.data.total_elevation_gain)\n    let activityMovingTime = MomentJS.duration(this.props.data.moving_time, 'seconds')\n    let activityMovingTimeHour = activityMovingTime._data.hours\n    let activityMovingTimeMinutes = activityMovingTime._data.minutes\n    let activityMovingTimeSeconds = activityMovingTime._data.seconds\n    let activityMovingTimeHHMMSS = activityMovingTimeHour + ':' + activityMovingTimeMinutes + ':' + activityMovingTimeSeconds\n\n    return(\n      <Link to={'/activities/'+ this.props.data.id}>\n        <div className=\"c-activity\">\n          <ActivityMap className=\"c-activity__map\" mapPolyline={this.props.data.map.summary_polyline}/>\n          <div className=\"c-activity__meta\">\n            <ActivityName favourite={this.props.favourite} data={this.props.data}/>\n            <div className=\"c-activity__stats\">\n              <ActivityStat label=\"distance\" value={activityDistance} unit=\"km\"/>\n              <ActivityStat label=\"climb\" value={activityTotalElevationGain} unit=\"m\"/>\n              <ActivityStat label=\"duration\" value={activityMovingTimeHHMMSS}/>\n              <ActivityStat label=\"average speed\" value={activityAverageSpeed} unit=\"km/h\"/>\n            </div>\n            <div className=\"o-flex o-flex-justify--end\">\n              {this.props.data.has_heartrate && <div className=\"c-activity__has-chart-icon c-activity__has-chart-icon--heartrate\"> <div className=\"c-tooltip\">Heartrate</div></div>}\n              {this.props.data.average_cadence && <div className=\"c-activity__has-chart-icon c-activity__has-chart-icon--cadence\"> <div className=\"c-tooltip\">Cadence</div></div>}\n              {this.props.data.device_watts && <div className=\"c-activity__has-chart-icon c-activity__has-chart-icon--power\"> <div className=\"c-tooltip\">Power</div></div>}\n            </div>\n\n          </div>\n        </div>\n      </Link>\n    )\n  }\n}\n\nexport default Activity\nexport {ActivityMap, ActivityStat}\n","import React, { Component } from \"react\";\n\nclass LoadingSpinner extends Component {\n  componentDidMount() {\n    let path = document.querySelector(\".c-loader__svg-stroke\");\n\n    let pathLength = path.getTotalLength();\n\n    path.style.strokeDasharray = pathLength;\n    path.style.strokeDashoffset = pathLength * 2;\n  }\n\n  render() {\n    return (\n      <div className=\"c-loading_spinner-wrap\">\n        <svg\n          width=\"28\"\n          height=\"28\"\n          viewBox=\"0 0 28 28\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            className=\"c-loader__svg-stroke\"\n            d=\"M14 2C7.37258 2 2 7.37258 2 14C2 20.6274 7.37258 26 14 26C20.6274 26 26 20.6274 26 14C26 10.6249 24.6066 7.57515 22.3636 5.39478\"\n            stroke=\"#FFC236\"\n            strokeWidth=\"3\"\n            fill=\"none\"\n            strokeLinecap=\"round\"\n          />\n        </svg>\n      </div>\n    );\n  }\n}\n\nexport default LoadingSpinner;\n","import React from 'react';\n\nconst IconBookmark = (props) => {\n  return(\n    <div className={props.className}>\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\"><title>bookmark</title><path d=\"M11 4H5v7l2.4-1.8c.356-.267.844-.267 1.2 0L11 11V4zm-3 7.25L4.6 13.8c-.66.494-1.6.024-1.6-.8V4c0-1.17.82-2 2-2h6c1.18 0 2 .83 2 2v9c0 .824-.94 1.294-1.6.8L8 11.25z\" fill-rule=\"nonzero\"/></svg>\n    </div>\n  )\n}\n\nconst IconArrowRight = (props) => {\n  return(\n    <div className={props.className}>\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\"><title>arrow--right</title><path d=\"M9.586 9H4c-.552 0-1-.448-1-1s.448-1 1-1h5.586L7.293 4.707c-.39-.39-.39-1.024 0-1.414.39-.39 1.024-.39 1.414 0l4 4c.39.39.39 1.024 0 1.414l-4 4c-.39.39-1.024.39-1.414 0-.39-.39-.39-1.024 0-1.414L9.586 9z\" fill-rule=\"nonzero\" /></svg>\n    </div>\n  )\n}\n\nconst IconArrowLeft = (props) => {\n  return(\n    <div className={props.className}>\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\"><title>arrow--left</title><path d=\"M6.414 9H12c.552 0 1-.448 1-1s-.448-1-1-1H6.414l2.293-2.293c.39-.39.39-1.024 0-1.414-.39-.39-1.024-.39-1.414 0l-4 4c-.39.39-.39 1.024 0 1.414l4 4c.39.39 1.024.39 1.414 0 .39-.39.39-1.024 0-1.414L6.414 9z\" fill-rule=\"nonzero\" /></svg>\n    </div>\n  )\n}\n\nconst IconBookmarkSolid = (props) => {\n  return(\n    <div className={props.className}>\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\"><title>bookmark--solid</title><path d=\"M8 10.25L5.6 12.8c-.66.494-1.6.024-1.6-.8V5c0-1.17.82-2 2-2h4c1.18 0 2 .83 2 2v7c0 .824-.94 1.294-1.6.8L8 10.25z\" fill-rule=\"nonzero\"/></svg>\n    </div>\n  )\n}\n\nconst IconCheckLine = (props) => {\n  return(\n    <div className={props.className}>\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\"><title>check--line</title><path d=\"M4.75 7.435c-.365-.414-.997-.454-1.41-.09-.416.366-.455.998-.09 1.412l3 3.404c.405.46 1.126.45 1.518-.02l5-6c.354-.424.296-1.055-.128-1.408-.424-.354-1.055-.296-1.408.128L6.98 9.963 4.75 7.435z\" fill-rule=\"nonzero\" /></svg>\n    </div>\n  )\n}\n\nconst IconProgress = (props) => {\n  return(\n    <div className={props.className}>\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\"><title>progress</title><path d=\"M9.657 5H6c-.552 0-1-.448-1-1s.448-1 1-1h6c.276 0 .526.112.707.293.18.18.293.43.293.707v6c0 .552-.448 1-1 1s-1-.448-1-1V6.485l-6.55 6.55c-.39.39-1.024.39-1.414 0-.39-.39-.39-1.023 0-1.414L9.656 5z\" fill-rule=\"evenodd\"/></svg>\n    </div>\n  )\n}\n\nconst IconCloud = (props) => {\n  return(\n    <div className={props.className}>\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\"><title>publish</title><path d=\"M14 8.578c0-1.423-1.205-2.593-2.703-2.54C10.712 4.836 9.457 4 8 4 6.056 4 4.472 5.48 4.36 7.347 3.14 7.1 2 8.003 2 9.214c0 1.938 2.087 1.908 2.087 1.908h7.565S14 10.824 14 8.578z\" fill-rule=\"evenodd\" stroke-linejoin=\"round\"/></svg>\n    </div>\n  )\n}\n\nconst IconDownload = (props) => {\n  return(\n    <div className={props.className}>\n      <svg width=\"16\" height=\"16\" viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\"><title>download</title><path d=\"M7 9.586V4c0-.552.448-1 1-1s1 .448 1 1v5.586l2.293-2.293c.39-.39 1.024-.39 1.414 0 .39.39.39 1.024 0 1.414l-4 4c-.39.39-1.024.39-1.414 0l-4-4c-.39-.39-.39-1.024 0-1.414.39-.39 1.024-.39 1.414 0L7 9.586z\" fillRule=\"nonzero\"/></svg>\n    </div>\n  )\n}\n\nconst IconChart = (props) => {\n  return(\n    <div className={props.className}>\n      <svg width=\"32px\" height=\"32px\" viewBox=\"0 0 32 32\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n        <g fillRule=\"non-zero\" id=\"Group\" transform=\"translate(1.000000, 8.000000)\">\n            <path d=\"M21,16 C18.465,16 16.2945,14.3906667 15.8415,12.1733333 L15.5655,10.8173333 C15.492,10.4546667 15.762,10.1093333 16.17,10.0413333 C16.5555,9.976 16.9665,10.2146667 17.0415,10.5786667 L17.3175,11.9346667 C17.6415,13.5186667 19.1895,14.6666667 21,14.6666667 C21.414,14.6666667 21.75,14.9653333 21.75,15.3333333 C21.75,15.7013333 21.414,16 21,16 Z\" id=\"Shape\"></path>\n            <path d=\"M1.5,16 C1.086,16 0.75,15.7013333 0.75,15.3333333 C0.75,14.9653333 1.086,14.6666667 1.5,14.6666667 C3.3105,14.6666667 4.8585,13.5186667 5.1825,11.9346667 L6.975,3.17333333 C7.35,1.33333333 9.15,0 11.25,0 C12.198,0 13.101,0.268 13.8615,0.777333333 C14.193,0.997333333 14.259,1.416 14.01,1.71066667 C13.761,2.00533333 13.293,2.06266667 12.96,1.84266667 C12.462,1.50933333 11.871,1.33333333 11.25,1.33333333 C9.8745,1.33333333 8.6985,2.20666667 8.4525,3.41066667 L6.6585,12.1733333 C6.2055,14.3906667 4.035,16 1.5,16 Z\" id=\"Shape\"></path>\n            <path d=\"M28.5,16 C25.965,16 23.7945,14.3906667 23.34,12.1733333 L21.5475,3.41066667 C21.3015,2.20666667 20.1255,1.33333333 18.75,1.33333333 C17.3745,1.33333333 16.1985,2.20666667 15.9525,3.41066667 L14.16,12.1733333 C13.7055,14.3906667 11.535,16 9,16 C8.586,16 8.25,15.7013333 8.25,15.3333333 C8.25,14.9653333 8.586,14.6666667 9,14.6666667 C10.8105,14.6666667 12.3585,13.5186667 12.6825,11.9346667 L14.475,3.17333333 C14.85,1.33333333 16.65,0 18.75,0 C20.85,0 22.65,1.33333333 23.025,3.172 L24.8175,11.9333333 C25.1415,13.5186667 26.6895,14.6666667 28.5,14.6666667 C28.914,14.6666667 29.25,14.9653333 29.25,15.3333333 C29.25,15.7013333 28.914,16 28.5,16 Z\" id=\"Shape\"></path>\n        </g>\n      </svg>\n    </div>\n  )\n}\n\nexport {IconBookmark, IconArrowLeft, IconArrowRight, IconBookmarkSolid, IconCheckLine,IconProgress, IconCloud, IconDownload, IconChart}\n","import React, { Component } from \"react\";\nimport Activity from \"../components/activity\";\nimport { Link } from \"react-router-dom\";\nimport { CSSTransitionGroup } from \"react-transition-group\";\nimport LoadingSpinner from \"../components/loader\";\nimport { getCookie } from \"../components/cookieHelper\";\nimport { fire } from \"../components/firebase\";\nimport _ from \"lodash\";\nimport { IconArrowRight, IconArrowLeft } from \"../components/icons/icons\";\n\nconst activitiesPerPage = 30;\n\nclass Activities extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: [],\n      pager: {},\n      loading: true,\n      userUid: props.userUid\n    };\n  }\n\n  componentWillMount() {\n    this.setState({\n      loading: true\n    });\n  }\n\n  // Check favourites state from Firebase\n  checkFavouriteStatus = () => {};\n\n  fetchData = () => {\n    let userAccessToken = getCookie(\"access_token\");\n    let page = this.props.match.params.page || 1;\n    let activitiesFetchUrl =\n      \"https://www.strava.com/api/v3/athlete/activities?page=\" + page;\n\n    fetch(activitiesFetchUrl, {\n      method: \"get\",\n      headers: {\n        \"content-type\": \"application/json\",\n        authorization: \"Bearer \" + userAccessToken\n      }\n    })\n      .then(function(response) {\n        return response.json();\n      })\n      .then(json => {\n        if (json.length < activitiesPerPage) {\n          this.setState({\n            data: json,\n            loading: false,\n            pager: {\n              isLastPage: true,\n              isFirstPage: false,\n              nextPage: null,\n              currentPage: Number(this.props.match.params.page),\n              previousPage: Number(this.props.match.params.page) - 1\n            }\n          });\n        } else if (\n          json.length === activitiesPerPage &&\n          this.props.match.params.page\n        ) {\n          this.setState({\n            data: json,\n            loading: false,\n            pager: {\n              isLastPage: false,\n              isFirstPage: false,\n              nextPage: Number(this.props.match.params.page) + 1,\n              currentPage: Number(this.props.match.params.page),\n              previousPage: Number(this.props.match.params.page) - 1\n            }\n          });\n        } else {\n          this.setState({\n            data: json,\n            loading: false,\n            pager: {\n              isLastPage: false,\n              isFirstPage: true,\n              nextPage: 2,\n              currentPage: 1,\n              previousPage: null\n            }\n          });\n        }\n      });\n  };\n\n  componentWillReceiveProps() {\n    let favouritesList = [];\n    let favouritesRef = fire\n      .database()\n      .ref(\"users/\" + this.state.userUid + \"/favourites\");\n\n    favouritesRef.once(\"value\", snapshot => {\n      snapshot.forEach(child => {\n        let favouriteActivityId = child.child(\"activityId\").val();\n        favouritesList.push(favouriteActivityId);\n      });\n\n      this.setState({\n        loading: false,\n        favouritesList: favouritesList\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  render() {\n    const activitiesData = this.state.data;\n    const activities = activitiesData.map((activity, index) => {\n      let isFavourite;\n\n      if (this.state.favouritesList) {\n        isFavourite = _.includes(\n          this.state.favouritesList,\n          String(activity.id)\n        );\n      }\n\n      return (\n        <Activity\n          favourite={isFavourite}\n          key={index}\n          data={activity}\n          mapDimension=\"400x400\"\n        />\n      );\n    });\n\n    if (this.state.loading) {\n      return (\n        <div className=\"o-flex o-flex-align--center o-flex-justify--center t-full-height\">\n          <LoadingSpinner />\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"o-wrapper\">\n          <div>\n            <Link to=\"/year-review\">\n              <div className=\"c-yrt-card t-top-spacing--xl\">\n                <IconArrowRight className=\"c-yrt-card__right-arrow\" />\n                <h2 className=\"c-yrt-card__header\">Your Year in Review</h2>\n                <p className=\"c-yrt-card__description\">\n                  Check your progress for 2020.\n                </p>\n              </div>\n            </Link>\n            <div className=\"c-page-header\">\n              <h1>All Activities</h1>\n            </div>\n            <CSSTransitionGroup\n              transitionName=\"o-transition\"\n              transitionAppear={true}\n              transitionAppearTimeout={500}\n              transitionEnterTimeout={500}\n              transitionLeaveTimeout={300}\n            >\n              {activities}\n            </CSSTransitionGroup>\n            <Paginator pager={this.state.pager} />\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nfunction Paginator(props) {\n  return (\n    <ul className=\"c-paginator\">\n      <li className=\"c-paginator__link t-right-spacing--xs\">\n        <a\n          className={props.pager.currentPage === 1 ? \"disabled c-btn\" : \"c-btn\"}\n          href={\"/activities/page/\" + props.pager.previousPage}\n        >\n          <IconArrowLeft />\n        </a>\n      </li>\n      <li className=\"c-paginator__link t-left-spacing--xs\">\n        <a\n          className={props.pager.isLastPage ? \"disabled c-btn\" : \"c-btn\"}\n          href={\"/activities/page/\" + props.pager.nextPage}\n        >\n          <IconArrowRight />\n        </a>\n      </li>\n    </ul>\n  );\n}\n\nexport default Activities;\n","import React, { Component } from 'react';\n\nlet authUrl = 'https://strava-auth.herokuapp.com';\nlet assetSrc = ''\n\nif(process.env.NODE_ENV === 'development'){\n  authUrl = 'http://localhost:3000';\n  assetSrc = '';\n} else {\n  authUrl = 'https://strava-auth.herokuapp.com';\n  assetSrc = '';\n}\nclass Login extends Component {\n  render() {\n\n    return(\n      <a href={authUrl}>\n        <img alt=\"\" src={ assetSrc + \"/img/btn_strava_connectwith_orange.svg\"}/>\n      </a>\n    )\n  }\n}\n\nexport default Login;\n","import React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { setCookie } from \"../components/cookieHelper\";\nimport * as firebase from \"firebase\";\nimport { fire } from \"../components/firebase\";\n\nlet userAccessToken;\nlet firebaseToken;\nlet refreshToken;\nlet accessTokenExpiresAt;\n\nlet setTokensFromUrl = () => {\n  const search = window.location.search.substring(1);\n  const query = JSON.parse(\n    '{\"' +\n      decodeURI(search)\n        .replace(/\"/g, '\\\\\"')\n        .replace(/&/g, '\",\"')\n        .replace(/=/g, '\":\"') +\n      '\"}'\n  );\n\n  console.log(query);\n\n  userAccessToken = query.access_token;\n  firebaseToken = query.firebase_token;\n  refreshToken = query.refresh_token;\n  accessTokenExpiresAt = query.expires_at;\n};\n\nlet signInWithFirebase = token => {\n  fire\n    .auth()\n    .signInWithCustomToken(token)\n    .catch(function(error) {\n      // Handle error\n      console.log(error.code);\n      console.log(error.message);\n    });\n};\n\nclass HandleRedirect extends Component {\n  componentWillMount() {\n    // read tokens from url\n    setTokensFromUrl();\n\n    // save access token to cookies\n    setCookie(\"access_token\", userAccessToken, 7);\n    setCookie(\"token_expires_at\", accessTokenExpiresAt, 7);\n    setCookie(\"refresh_token\", refreshToken, 7);\n\n    // sign in with firebase token\n    signInWithFirebase(firebaseToken);\n\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        console.log(\"logged in with firebase\", user.uid);\n      } else {\n      }\n    });\n  }\n\n  render() {\n    return <Redirect to=\"/\" />;\n    // return <div>asdf</div>;\n  }\n}\n\nexport default HandleRedirect;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { NavLink, Link } from \"react-router-dom\";\nimport Login from \"../views/login\";\nimport { getCookie, deleteCookie } from \"../components/cookieHelper\";\nimport { fire } from \"./firebase\";\nimport { IconBookmarkSolid } from \"../components/icons/icons\";\n\nclass Nav extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: {}\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.authState) {\n      let userAccessToken = getCookie(\"access_token\");\n\n      fetch(\"https://www.strava.com/api/v3/athlete\", {\n        method: \"get\",\n        headers: {\n          \"content-type\": \"application/json\",\n          authorization: \"Bearer \" + userAccessToken\n        }\n      })\n        .then(function(response) {\n          return response.json();\n        })\n        .then(json => {\n          this.setState({\n            data: json\n          });\n        });\n    } else {\n      // do nothing\n    }\n  }\n\n  render() {\n    if (this.props.type === \"private\") {\n      return (\n        <div className=\"c-navigation\">\n          <ul className=\"c-navigation__nav o-flex o-flex-justify--space-between\">\n            <Link activeClassName=\"test\" to=\"/\">\n              <h4 className=\"c-navigation__logo\">\n                <span aria-label=\"banana\" role=\"img\">\n                  🍌\n                </span>{\" \"}\n                banana\n              </h4>\n            </Link>\n            <div className=\"o-flex\">\n              <NavLink\n                className=\"c-navigation__nav-item\"\n                activeClassName=\"active\"\n                exact\n                to=\"/favourites\"\n              >\n                <IconBookmarkSolid />\n                <div className=\"c-tooltip\">Favourites</div>\n              </NavLink>\n            </div>\n          </ul>\n          <NavigationProfile data={this.state.data} />\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"c-navigation\">\n          <NavLink activeClassName=\"active\" exact to=\"/\">\n            <h4 className=\"c-navigation__logo\">\n              <span aria-label=\"banana\" role=\"img\">\n                🍌\n              </span>{\" \"}\n              banana\n            </h4>\n          </NavLink>\n          <Login />\n        </div>\n      );\n    }\n  }\n}\n\nclass NavigationProfile extends Component {\n  constructor() {\n    super();\n    this.state = {\n      showDropdown: false\n    };\n  }\n\n  logout = () => {\n    deleteCookie(\"access_token\");\n    fire\n      .auth()\n      .signOut()\n      .then(function() {\n        // Sign-out successful.\n        window.location.assign(\"/\");\n      })\n      .catch(function(error) {\n        // An error happened.\n      });\n  };\n\n  showDropdown = () => {\n    this.setState({\n      showDropdown: !this.state.showDropdown\n    });\n  };\n\n  render() {\n    return (\n      <div className=\"c-navigation__profile\">\n        <a onClick={this.showDropdown} href=\"#\">\n          <img\n            className=\"c-navigation__profile-image\"\n            src={this.props.data.profile}\n            alt=\"\"\n          />\n        </a>\n        <ul\n          className={\n            this.state.showDropdown\n              ? \"show c-navigation__dropdown\"\n              : \"c-navigation__dropdown\"\n          }\n        >\n          <li className=\"c-navigation__dropdown-info\">\n            <h3 className=\"c-navigation__dropdown-name\">\n              {this.props.data.firstname} {this.props.data.lastname}\n            </h3>\n            <h3 className=\"c-navigation__dropdown-location\">\n              {this.props.data.country}, {this.props.data.city}\n            </h3>\n          </li>\n          <a onClick={this.logout}>\n            <li className=\"c-navigation__dropdown-link\">Log Out</li>\n          </a>\n        </ul>\n      </div>\n    );\n  }\n}\n\nNavigationProfile.propTypes = {\n  data: PropTypes.object\n};\n\nNav.propTypes = {\n  type: PropTypes.string\n};\n\nexport default Nav;\n","import React from 'react';\nimport {Line, defaults} from 'react-chartjs-2'\nimport _ from 'lodash';\n\ndefaults.global.elements.point.borderWidth = 0;\ndefaults.global.elements.point.radius = 0;\ndefaults.global.elements.point.backgroundColor = 'rgba(0,0,0,0)';\ndefaults.global.elements.line.tension = 0.25;\ndefaults.global.elements.line.borderWidth = 0;\ndefaults.global.defaultFontFamily = \"'-apple-system','Helvetica Neue', 'Helvetica', 'Arial', sans-serif\";\n\nconst globalTicksFontSize = 9\nconst globalLineWidth = 1\nconst globalElevationFillColor = 'rgba(0,0,0,0.5)';\nconst globalElevationBorderColor = 'rgba(0,0,0,0)';\n\n\nfunction ActivityChart(props) {\n  function mToKm(m) {\n    return _.round(m / 1000, 2);\n  }\n\n  let distanceStreamKm = _.map(props.distanceStream, mToKm)\n\n  let options;\n  let data;\n\n  if(props.dataType === 'heartrate'){\n    data = {\n      labels: distanceStreamKm,\n      datasets: [\n        {\n          label: props.dataTypeLegendLabel,\n          borderColor: 'rgba(255, 255, 255, 1)',\n          borderWidth: globalLineWidth,\n          yAxisID: 'main-data-y-axis',\n          fill: false,\n          data: props.mainDataStream\n        },{\n          label: 'Elevation',\n          fill: true,\n          backgroundColor: globalElevationFillColor,\n          borderColor: globalElevationBorderColor,\n          borderWidth: 0,\n          data: props.altitudeStream\n        }\n      ]\n    };\n    options = {\n      layout: {\n        padding: 0\n      },\n      responsive: true,\n      maintainAspectRatio: true,\n      legend: {\n        display: false,\n        usePointStyle: true,\n        position: 'bottom',\n        labels: {\n          boxWidth: 10,\n          padding: 20\n        }\n      },\n      tooltips: {\n        mode: 'index',\n        intersect: false,\n        displayColors: false,\n        xPadding: 10,\n        yPadding: 10\n      },\n      hover: {\n        mode: 'nearest',\n        intersect: true,\n        animationDuration: 1000\n      },\n      scales: {\n        xAxes: [{\n          type: 'category',\n          display: false,\n          ticks: {\n            fontSize: globalTicksFontSize,\n            autoSkipPadding: 400,\n            maxRotation: 0,\n            callback: function(value) {\n              return _.round(value, 1) + ' km'\n            }\n          },\n          stepSize: 10\n        }],\n        yAxes: [\n          {\n            display: false,\n            id: 'altitude-y-axis',\n            position: 'left',\n            borderColor: 'rgba(0, 140, 255, 0.9)',\n            ticks: {\n              fontSize: globalTicksFontSize,\n              stepSize: 50,\n              autoSkip: true,\n              autoSkipPadding: 400,\n              callback: function(value) {\n                return _.round(value, 0) + ' m'\n              }\n            }\n          },{\n            display: true,\n            id: 'main-data-y-axis',\n            position: 'right',\n            ticks: {\n              fontSize: globalTicksFontSize,\n              fontColor: 'rgba(255,255,255,0.5)',\n              autoSkip: true,\n              autoSkipPadding: 400,\n              callback: function(value) {\n                return _.round(value, 0) + ' ' + props.dataTypeUnit\n              }\n            }\n          }\n        ]\n      }\n    }\n  } else if (props.dataType === 'velocity') {\n\n    data = {\n      labels: distanceStreamKm,\n      datasets: [\n        {\n          label: props.dataTypeLegendLabel,\n          borderColor: 'rgba(255, 255, 255, 1)',\n          borderWidth: globalLineWidth,\n          yAxisID: 'main-data-y-axis',\n          fill: false,\n          data: props.mainDataStream\n        },{\n          label: 'Elevation',\n          fill: true,\n          backgroundColor: globalElevationFillColor,\n          borderColor: globalElevationBorderColor,\n          borderWidth: 0,\n          data: props.altitudeStream\n        }\n      ]\n    }\n\n    options = {\n      layout: {\n        padding: 0\n      },\n      responsive: true,\n      maintainAspectRatio: true,\n      legend: {\n        display: false,\n        usePointStyle: true,\n        position: 'bottom',\n        labels: {\n          boxWidth: 10,\n          padding: 20\n        }\n      },\n      tooltips: {\n        mode: 'index',\n        intersect: false,\n        displayColors: false,\n        xPadding: 10,\n        yPadding: 10\n      },\n      hover: {\n        mode: 'nearest',\n        intersect: true,\n        animationDuration: 1000\n      },\n      scales: {\n        xAxes: [{\n          type: 'category',\n          display: false,\n          ticks: {\n            fontSize: globalTicksFontSize,\n            autoSkipPadding: 400,\n            maxRotation: 0,\n            callback: function(value) {\n              return _.round(value, 1) + ' km'\n            }\n          },\n          stepSize: 10\n        }],\n        yAxes: [\n          {\n            display: false,\n            id: 'altitude-y-axis',\n            position: 'left',\n            borderColor: 'rgba(0, 140, 255, 0.9)',\n            ticks: {\n              fontSize: globalTicksFontSize,\n              stepSize: 50,\n              autoSkip: true,\n              autoSkipPadding: 400,\n              callback: function(value) {\n                return _.round(value, 0) + ' m'\n              }\n            }\n          },{\n            display: true,\n            id: 'main-data-y-axis',\n            position: 'right',\n            ticks: {\n              fontSize: globalTicksFontSize,\n              fontColor: 'rgba(255,255,255,0.5)',\n              autoSkip: true,\n              autoSkipPadding: 400,\n              callback: function(value) {\n                return _.round(value, 0) + ' ' + props.dataTypeUnit\n              }\n            }\n          }\n        ]\n      }\n    }\n\n  } else if (props.dataType === 'cadence') {\n    data = {\n      labels: distanceStreamKm,\n      datasets: [\n        {\n          label: props.dataTypeLegendLabel,\n          borderColor: 'rgba(255, 255, 255, 1)',\n          borderWidth: 0,\n          pointRadius: 0.5,\n          pointBorderWidth: 1,\n          showLine: false,\n          pointBackgroundColor: 'rgba(255, 255, 255, 1)',\n          yAxisID: 'main-data-y-axis',\n          fill: false,\n          data: props.mainDataStream\n        },{\n          label: 'Elevation',\n          fill: true,\n          backgroundColor: globalElevationFillColor,\n          borderColor: globalElevationBorderColor,\n          borderWidth: 0,\n          data: props.altitudeStream\n        }\n      ]\n    }\n\n    options = {\n      layout: {\n        padding: 0\n      },\n      responsive: true,\n      maintainAspectRatio: true,\n      legend: {\n        display: false,\n        usePointStyle: true,\n        position: 'bottom',\n        labels: {\n          boxWidth: 10,\n          padding: 20\n        }\n      },\n      tooltips: {\n        mode: 'index',\n        intersect: false,\n        displayColors: false,\n        xPadding: 10,\n        yPadding: 10\n      },\n      hover: {\n        mode: 'nearest',\n        intersect: true,\n        animationDuration: 1000\n      },\n      scales: {\n        xAxes: [{\n          type: 'category',\n          display: false,\n          ticks: {\n            fontSize: globalTicksFontSize,\n            autoSkipPadding: 400,\n            maxRotation: 0,\n            callback: function(value) {\n              return _.round(value, 1) + ' km'\n            }\n          },\n          stepSize: 10\n        }],\n        yAxes: [\n          {\n            display: false,\n            id: 'altitude-y-axis',\n            position: 'left',\n            borderColor: 'rgba(0, 140, 255, 0.9)',\n            ticks: {\n              fontSize: globalTicksFontSize,\n              stepSize: 50,\n              autoSkip: true,\n              autoSkipPadding: 400,\n              callback: function(value) {\n                return _.round(value, 0) + ' m'\n              }\n            }\n          },{\n            display: true,\n            id: 'main-data-y-axis',\n            position: 'right',\n            ticks: {\n              fontSize: globalTicksFontSize,\n              fontColor: 'rgba(255,255,255,0.5)',\n              autoSkip: true,\n              autoSkipPadding: 400,\n              callback: function(value) {\n                return _.round(value, 0) + ' ' + props.dataTypeUnit\n              }\n            }\n          }\n        ]\n      }\n    }\n  } else {\n    data = {\n      labels: distanceStreamKm,\n      datasets: [\n        {\n          label: props.dataTypeLegendLabel,\n          borderColor: 'rgba(255, 255, 255, 1)',\n          borderWidth: globalLineWidth,\n          yAxisID: 'main-data-y-axis',\n          fill: false,\n          data: props.mainDataStream,\n          cubicInterpolationMode: 'monotone'\n        },{\n          label: 'Elevation',\n          fill: true,\n          backgroundColor: globalElevationFillColor,\n          borderColor: globalElevationBorderColor,\n          borderWidth: 0,\n          data: props.altitudeStream\n        }\n      ]\n    }\n\n    options = {\n      layout: {\n        padding: 0\n      },\n      responsive: true,\n      maintainAspectRatio: true,\n      legend: {\n        display: false,\n        usePointStyle: true,\n        position: 'bottom',\n        labels: {\n          boxWidth: 10,\n          padding: 20\n        }\n      },\n      tooltips: {\n        mode: 'index',\n        intersect: false,\n        displayColors: false,\n        xPadding: 10,\n        yPadding: 10\n      },\n      hover: {\n        mode: 'nearest',\n        intersect: true,\n        animationDuration: 1000\n      },\n      scales: {\n        xAxes: [{\n          type: 'category',\n          display: false,\n          ticks: {\n            fontSize: globalTicksFontSize,\n            autoSkipPadding: 400,\n            maxRotation: 0,\n            callback: function(value) {\n              return _.round(value, 1) + ' km'\n            }\n          },\n          stepSize: 10\n        }],\n        yAxes: [\n          {\n            display: false,\n            id: 'altitude-y-axis',\n            position: 'left',\n            borderColor: 'rgba(0, 140, 255, 0.9)',\n            ticks: {\n              fontSize: globalTicksFontSize,\n              stepSize: 50,\n              autoSkip: true,\n              autoSkipPadding: 400,\n              callback: function(value) {\n                return _.round(value, 0) + ' m'\n              }\n            }\n          },{\n            display: true,\n            id: 'main-data-y-axis',\n            position: 'right',\n            ticks: {\n              fontSize: globalTicksFontSize,\n              fontColor: 'rgba(255,255,255,0.5)',\n              autoSkip: true,\n              autoSkipPadding: 400,\n              callback: function(value) {\n                return _.round(value, 0) + ' ' + props.dataTypeUnit\n              }\n            }\n          }\n        ]\n      }\n    }\n  }\n\n\n  return(\n    <Line data={data} options={options} width={40} height={10}/>\n  )\n}\n\nexport default ActivityChart\n","import React, {Component} from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport polyline from '@mapbox/polyline'\nimport {getCookie} from '../components/cookieHelper'\n\nlet userAccessToken = getCookie('access_token')\n\nlet latLngCircleSize = 20\nlet latLngCircleOpacity = 0.5\n\nif(userAccessToken) {\n  latLngCircleSize = 4\n  latLngCircleOpacity = 1\n} else {\n  latLngCircleSize = 50\n  latLngCircleOpacity = 0\n}\n\n\nclass MapboxMap extends Component {\n\n  componentDidMount() {\n\n    let decodedPolyline = polyline.toGeoJSON(this.props.mapPolyline)\n    let decodedPolylineArray = decodedPolyline.coordinates\n    let startLatlng = this.props.startLatlng\n    let endLatlng = this.props.endLatlng\n\n    mapboxgl.accessToken = 'pk.eyJ1IjoicDBwbWFrZXIiLCJhIjoiY2lzOXliOGlrMDA2ODJ5bzJ4YjNnb29qdSJ9.hf19Sca7oYCcR8kRlx07Rw';\n\n    const map = new mapboxgl.Map({\n      container: this.container,\n      style: 'mapbox://styles/mapbox/streets-v9',\n      center: [\n        startLatlng[1], startLatlng[0]\n      ],\n      zoom: 10\n    })\n\n    map.on('load', function() {\n\n      map.addLayer({\n        \"id\": \"route\",\n        \"type\": \"line\",\n        \"source\": {\n          \"type\": \"geojson\",\n          \"data\": {\n            \"type\": \"Feature\",\n            \"properties\": {},\n            \"geometry\": {\n              \"type\": \"LineString\",\n              \"coordinates\": decodedPolylineArray\n            }\n          }\n        },\n        \"layout\": {\n          \"line-join\": \"round\",\n          \"line-cap\": \"round\"\n        },\n        \"paint\": {\n          \"line-color\": \"#0a67f2\",\n          \"line-width\": 2\n        }\n      });\n\n      map.addLayer({\n        \"id\": \"start\",\n        \"type\": \"circle\",\n        \"source\": {\n          \"type\": \"geojson\",\n          \"data\": {\n            \"type\": \"Feature\",\n            \"properties\": {\n              \"description\": \"Activity Start\"\n            },\n            \"geometry\": {\n              \"type\": \"Point\",\n              \"coordinates\": [startLatlng[1], startLatlng[0]]\n            }\n          }\n        },\n        \"paint\": {\n          \"circle-color\": \"#41c15a\",\n          \"circle-radius\": latLngCircleSize,\n          \"circle-opacity\": latLngCircleOpacity\n        }\n      });\n\n      map.addLayer({\n        \"id\": \"end\",\n        \"type\": \"circle\",\n        \"source\": {\n          \"type\": \"geojson\",\n          \"data\": {\n            \"type\": \"Feature\",\n            \"properties\": {\n              \"description\": \"Activitiy End\"\n            },\n            \"geometry\": {\n              \"type\": \"Point\",\n              \"coordinates\": [endLatlng[1], endLatlng[0]]\n            }\n          }\n        },\n        \"paint\": {\n          \"circle-color\": \"#f03434\",\n          \"circle-radius\": latLngCircleSize,\n          \"circle-opacity\": latLngCircleOpacity\n        }\n      });\n\n      // Geographic coordinates of the LineString\n      var coordinates = decodedPolylineArray;\n\n      // Pass the first coordinates in the LineString to `lngLatBounds` &\n      // wrap each coordinate pair in `extend` to include them in the bounds\n      // result. A variation of this technique could be applied to zooming\n      // to the bounds of multiple Points or Polygon geomteries - it just\n      // requires wrapping all the coordinates with the extend method.\n      var bounds = coordinates.reduce(function(bounds, coord) {\n        return bounds.extend(coord);\n      }, new mapboxgl.LngLatBounds(coordinates[0], coordinates[0]));\n\n      map.fitBounds(bounds, {padding: 80});\n\n      map.addControl(new mapboxgl.NavigationControl())\n      // map.addControl(new mapboxgl.FullscreenControl());\n      map.scrollZoom.disable();\n\n      // Create a popup, but don't add it to the map yet.\n      let popup = new mapboxgl.Popup({closeButton: false, closeOnClick: false});\n\n      map.on('mouseenter', 'start', function(e) {\n        // Change the cursor style as a UI indicator.\n        map.getCanvas().style.cursor = 'pointer';\n\n        // Populate the popup and set its coordinates\n        // based on the feature found.\n        popup.setLngLat(e.features[0].geometry.coordinates).setHTML(e.features[0].properties.description).addTo(map);\n      });\n\n      map.on('mouseleave', 'start', function() {\n        map.getCanvas().style.cursor = '';\n        popup.remove();\n      });\n\n      map.on('mouseenter', 'end', function(e) {\n        // Change the cursor style as a UI indicator.\n        map.getCanvas().style.cursor = 'pointer';\n\n        // Populate the popup and set its coordinates\n        // based on the feature found.\n        popup.setLngLat(e.features[0].geometry.coordinates).setHTML(e.features[0].properties.description).addTo(map);\n      });\n\n      map.on('mouseleave', 'end', function() {\n        map.getCanvas().style.cursor = '';\n        popup.remove();\n      });\n\n    });\n  }\n\n  render() {\n    return (\n      <div className='c-activity-interactive-map-container'>\n        <div className='c-activity-interactive-map' ref={(x) => {\n          this.container = x\n        }}></div>\n      </div>\n    )\n  }\n}\n\nexport default MapboxMap\n","import React from 'react';\n\nfunction ActivityFoodCard(props) {\n  return(\n    <div className=\"c-box c-activity-food-card\">\n      <h4 className=\"c-activity-food-card__header\">{props.name}</h4>\n      <h1 className=\"c-activity-food-card__number\">{props.value}</h1>\n      <img className=\"c-activity-food-card__image c-activity-food-card__image--filter\" src={props.imageSrc} alt=\"\"/>\n      <img className=\"c-activity-food-card__image\" src={props.imageSrc} alt=\"\"/>\n    </div>\n  )\n}\n\nexport default ActivityFoodCard\n","import React, { Component } from \"react\";\nimport { ActivityStat } from \"../components/activity\";\nimport MomentJS from \"moment\";\nimport _ from \"lodash\";\nimport LoadingSpinner from \"../components/loader\";\nimport ActivityChart from \"../components/chart\";\nimport MapboxMap from \"../components/mapbox\";\nimport { getCookie } from \"../components/cookieHelper\";\nimport { getUserStatus } from \"../components/firebase\";\nimport domtoimage from \"dom-to-image\";\nimport fileSaver from \"file-saver\";\nimport ActivityFoodCard from \"../components/foodCard\";\nimport ActivityHeader from \"../components/activityHeader\";\n\nlet activityDistance;\nlet activityTotalElevationGain;\nlet activityTotalCalories;\nlet activityMovingTime;\nlet activityMovingTimeHour;\nlet activityMovingTimeMinutes;\nlet activityMovingTimeSeconds;\nlet activityMovingTimeHHMMSS;\n\nlet activityAverageSpeed;\nlet activityMaxSpeed;\nlet activityAverageCadence;\nlet activityAverageHeartRate;\nlet activityAverageWatts;\nlet activityMaxWatts;\nlet activityMaxHeartRate;\nlet activityDeviceWatts;\n\nlet foodBurnedBanana;\nlet foodBurnedBeers;\nlet foodBurnedCookies;\nlet foodBurnedCheeseburgers;\nlet foodBurnedCadburyChocolate;\nlet foodBurnedPizzaSlice;\n\nlet publicAccessToken = \"011c89ee01402ab591de0240d59ee84455fd4d42\";\n\nclass ActivityDetail extends Component {\n  constructor(props) {\n    super(props);\n    getUserStatus().then(uid => {\n      this.setState({\n        userUid: uid\n      });\n    });\n    this.state = {\n      data: [],\n      gear: [],\n      athlete: {},\n      map: {},\n      chartData: {},\n      loading: true,\n      isFavourite: false\n    };\n  }\n\n  componentDidMount() {\n    console.log(\"didmount\");\n    let userAccessToken = getCookie(\"access_token\") || publicAccessToken;\n    let thisActivityApiUrl =\n      \"https://www.strava.com/api/v3/activities/\" + this.props.match.params.id;\n\n    let thisActivityStreamApiUrl =\n      thisActivityApiUrl +\n      \"/streams/watts,altitude,heartrate,latlng,cadence,velocity_smooth?resolution=medium\";\n\n    this.setState({ loading: true });\n\n    fetch(thisActivityApiUrl, {\n      method: \"get\",\n      headers: {\n        \"content-type\": \"application/json\",\n        authorization: \"Bearer \" + userAccessToken\n      }\n    })\n      .then(function(response) {\n        return response.json();\n      })\n      .then(json => {\n        console.log(json);\n        this.setState({\n          data: json,\n          gear: json.gear,\n          athlete: json.athlete,\n          map: json.map\n        });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n\n    if (userAccessToken) {\n      fetch(thisActivityStreamApiUrl, {\n        method: \"get\",\n        headers: {\n          \"content-type\": \"application/json\",\n          authorization: \"Bearer \" + userAccessToken\n        }\n      })\n        .then(function(response) {\n          return response.json();\n        })\n        .then(json => {\n          function findDistance(array) {\n            return array.type === \"distance\";\n          }\n          function findHeartrate(array) {\n            return array.type === \"heartrate\";\n          }\n          function findAltitude(array) {\n            return array.type === \"altitude\";\n          }\n          function findLatlng(array) {\n            return array.type === \"latlng\";\n          }\n          function findCadence(array) {\n            return array.type === \"cadence\";\n          }\n          function findVelocity(array) {\n            return array.type === \"velocity_smooth\";\n          }\n          function findWatts(array) {\n            return array.type === \"watts\";\n          }\n\n          if (json.find(findDistance)) {\n            this.setState({\n              distanceStream: json.find(findDistance).data\n            });\n          }\n\n          if (json.find(findAltitude)) {\n            this.setState({\n              altitudeStream: json.find(findAltitude).data\n            });\n          }\n\n          if (json.find(findHeartrate)) {\n            this.setState({\n              heartrateStream: json.find(findHeartrate).data\n            });\n          }\n\n          if (json.find(findLatlng)) {\n            this.setState({\n              latLngStream: json.find(findLatlng).data\n            });\n          }\n\n          if (json.find(findCadence)) {\n            this.setState({\n              cadenceStream: json.find(findCadence).data\n            });\n          }\n\n          if (json.find(findWatts)) {\n            this.setState({\n              wattsStream: json.find(findWatts).data\n            });\n          }\n\n          if (json.find(findVelocity)) {\n            function toKPH(m) {\n              let toKM = m / 1000;\n              let toKPH = toKM * 60 * 60;\n\n              return _.round(toKPH, 2);\n            }\n\n            let velocityStreamArray = json.find(findVelocity).data;\n            let velocityKPH = _.map(velocityStreamArray, toKPH);\n\n            this.setState({\n              velocityStream: velocityKPH\n            });\n          }\n\n          this.setState({ loading: false });\n        })\n        .catch(function(error) {\n          console.log(\"error fetching stream\");\n        });\n    } else {\n      // do nothing\n    }\n  }\n\n  downloadSpeedChart = () => {\n    let copyNode = document.getElementById(\"activityCard--speed\");\n\n    domtoimage\n      .toBlob(copyNode)\n      .then(function(blob) {\n        fileSaver.saveAs(blob, \"speed_chart.png\");\n      })\n      .catch(function(error) {\n        console.error(\"oops, something went wrong!\", error);\n      });\n  };\n\n  downloadHeartrateChart = () => {\n    let copyNode = document.getElementById(\"activityCard--heartrate\");\n\n    domtoimage\n      .toBlob(copyNode)\n      .then(function(blob) {\n        fileSaver.saveAs(blob, \"heartrate_chart.png\");\n      })\n      .catch(function(error) {\n        console.error(\"oops, something went wrong!\", error);\n      });\n  };\n\n  downloadCadenceChart = () => {\n    let copyNode = document.getElementById(\"activityCard--cadence\");\n\n    domtoimage\n      .toBlob(copyNode)\n      .then(function(blob) {\n        fileSaver.saveAs(blob, \"cadence_chart.png\");\n      })\n      .catch(function(error) {\n        console.error(\"oops, something went wrong!\", error);\n      });\n  };\n\n  render() {\n    // Distance\n    activityDistance = _.round(this.state.data.distance / 1000, 1);\n    // Climb\n    activityTotalElevationGain = _.round(\n      this.state.data.total_elevation_gain,\n      0\n    );\n    // Calories\n    activityTotalCalories = this.state.data.calories;\n\n    // Duration\n    activityMovingTime = MomentJS.duration(\n      this.state.data.moving_time,\n      \"seconds\"\n    );\n    activityMovingTimeHour = activityMovingTime._data.hours;\n    activityMovingTimeMinutes = activityMovingTime._data.minutes;\n    activityMovingTimeSeconds = activityMovingTime._data.seconds;\n    activityMovingTimeHHMMSS =\n      activityMovingTimeHour +\n      \":\" +\n      activityMovingTimeMinutes +\n      \":\" +\n      activityMovingTimeSeconds;\n\n    // Average Speed\n    activityAverageSpeed = _.round(\n      (this.state.data.average_speed * 60 * 60) / 1000,\n      1\n    );\n    activityMaxSpeed = _.round((this.state.data.max_speed * 60 * 60) / 1000, 1);\n\n    // Cadence\n    activityAverageCadence = _.round(this.state.data.average_cadence, 1);\n\n    // Watts\n    activityAverageWatts = _.round(this.state.data.average_watts, 1);\n    activityMaxWatts = this.state.data.max_watts;\n    activityDeviceWatts = this.state.data.device_watts;\n\n    // Heart Rate\n    activityAverageHeartRate = this.state.data.average_heartrate;\n    activityMaxHeartRate = this.state.data.max_heartrate;\n\n    // Food Burned\n    foodBurnedBanana = _.round(activityTotalCalories / 90, 1);\n    foodBurnedBeers = _.round(activityTotalCalories / 208, 1);\n    foodBurnedCookies = _.round(activityTotalCalories / 50, 1);\n    foodBurnedCheeseburgers = _.round(activityTotalCalories / 303, 1);\n    foodBurnedCheeseburgers = _.round(activityTotalCalories / 180, 1);\n    foodBurnedCadburyChocolate = _.round(activityTotalCalories / 240, 1);\n    foodBurnedPizzaSlice = _.round(activityTotalCalories / 272, 1);\n\n    if (this.state.loading) {\n      return (\n        <div className=\"o-flex o-flex-align--center o-flex-justify--center t-full-height\">\n          <LoadingSpinner />\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"o-wrapper o-activity-detail\">\n          <ActivityHeader\n            data={this.state.data}\n            userUid={this.state.userUid}\n            activityId={this.props.match.params.id}\n            altitudeStream={this.state.altitudeStream}\n            cadenceStream={this.state.cadenceStream}\n            distanceStream={this.state.distanceStream}\n            heartrateStream={this.state.heartrateStream}\n            wattsStream={this.state.wattsStream}\n            latLngStream={this.state.latLngStream}\n            velocityStream={this.state.velocityStream}\n          />\n          <div className=\"o-activity-detail__summary\">\n            <div className=\"c-activity-summary o-flex o-flex-justify--start\">\n              {activityDistance ? (\n                <ActivityStat\n                  type=\"large\"\n                  label=\"distance\"\n                  value={activityDistance}\n                  unit=\"km\"\n                />\n              ) : null}\n              {activityTotalElevationGain ? (\n                <ActivityStat\n                  type=\"large\"\n                  label=\"climb\"\n                  value={activityTotalElevationGain}\n                  unit=\"m\"\n                />\n              ) : null}\n              {activityMovingTimeHHMMSS ? (\n                <ActivityStat\n                  type=\"large\"\n                  label=\"duration\"\n                  value={activityMovingTimeHHMMSS}\n                />\n              ) : null}\n              {activityTotalCalories ? (\n                <ActivityStat\n                  type=\"large\"\n                  label=\"calories\"\n                  value={activityTotalCalories}\n                />\n              ) : null}\n            </div>\n            {this.state.map.summary_polyline && (\n              <MapboxMap\n                mapPolyline={\n                  this.state.map.polyline || this.state.map.summary_polyline\n                }\n                startLatlng={this.state.data.start_latlng}\n                endLatlng={this.state.data.end_latlng}\n              />\n            )}\n          </div>\n\n          <div>\n            {/* Speed Summary Card */}\n            {activityAverageSpeed ? (\n              <div\n                id=\"activityCard--speed\"\n                className=\"c-activity-graph c-activity-graph--velocity t-top-spacing--l\"\n              >\n                <div className=\"c-activity-graph-container\">\n                  <div className=\"o-flex o-flex-align--start\">\n                    {this.state.velocityStream && this.state.altitudeStream ? (\n                      <h3 className=\"t-bottom-spacing--xl\">\n                        Speed\n                        <span className=\"c-activity-graph__header--supplementary \">\n                          {\" \"}\n                          & Elevation\n                        </span>\n                      </h3>\n                    ) : (\n                      <h3 className=\"t-bottom-spacing--xl\">Speed</h3>\n                    )}\n                  </div>\n\n                  <div className=\"t-bottom-spacing--xl o-flex o-flex-justify--start\">\n                    <ActivityStat\n                      type=\"large\"\n                      label=\"average\"\n                      value={activityAverageSpeed}\n                      unit=\"km\"\n                    />\n                    <ActivityStat\n                      type=\"large\"\n                      label=\"max\"\n                      value={activityMaxSpeed}\n                      unit=\"km\"\n                    />\n                  </div>\n                  {this.state.velocityStream ? (\n                    <ActivityChart\n                      altitudeStream={this.state.altitudeStream}\n                      distanceStream={this.state.distanceStream}\n                      mainDataStream={this.state.velocityStream}\n                      dataType=\"velocity\"\n                      dataTypeLegendLabel=\"Speed\"\n                      dataTypeUnit=\"KM/H\"\n                    />\n                  ) : null}\n                </div>\n              </div>\n            ) : null}\n            {/* Heart Rate Summary Card */}\n            {activityAverageHeartRate ? (\n              <div\n                id=\"activityCard--heartrate\"\n                className=\"c-activity-graph c-activity-graph--heartrate t-top-spacing--l\"\n              >\n                <div className=\"c-activity-graph-container\">\n                  <div className=\"o-flex o-flex-align--start\">\n                    {this.state.heartrateStream && this.state.altitudeStream ? (\n                      <h3 className=\"t-bottom-spacing--xl\">\n                        Heart Rate\n                        <span className=\"c-activity-graph__header--supplementary \">\n                          {\" \"}\n                          & Elevation\n                        </span>\n                      </h3>\n                    ) : (\n                      <h3 className=\"t-bottom-spacing--xl\">Heart Rate</h3>\n                    )}\n                  </div>\n                  <div className=\"t-bottom-spacing--xl o-flex o-flex-justify--start\">\n                    <ActivityStat\n                      type=\"large\"\n                      label=\"average\"\n                      value={activityAverageHeartRate}\n                      unit=\"bpm\"\n                    />\n                    <ActivityStat\n                      type=\"large\"\n                      label=\"max\"\n                      value={activityMaxHeartRate}\n                      unit=\"bpm\"\n                    />\n                  </div>\n                  {this.state.heartrateStream ? (\n                    <ActivityChart\n                      altitudeStream={this.state.altitudeStream}\n                      distanceStream={this.state.distanceStream}\n                      mainDataStream={this.state.heartrateStream}\n                      dataType=\"heartrate\"\n                      dataTypeLegendLabel=\"Heart Rate\"\n                      dataTypeUnit=\"BPM\"\n                    />\n                  ) : null}\n                </div>\n              </div>\n            ) : null}\n            {/* Cadence Summary Card */}\n            {activityAverageCadence ? (\n              <div\n                id=\"activityCard--cadence\"\n                className=\"c-activity-graph c-activity-graph--cadence t-top-spacing--l\"\n              >\n                <div className=\"c-activity-graph-container\">\n                  <div className=\"o-flex o-flex-align--start\">\n                    {this.state.cadenceStream && this.state.altitudeStream ? (\n                      <h3 className=\"t-bottom-spacing--xl\">\n                        Cadence\n                        <span className=\"c-activity-graph__header--supplementary \">\n                          {\" \"}\n                          & Elevation\n                        </span>\n                      </h3>\n                    ) : (\n                      <h3 className=\"t-bottom-spacing--xl\">Cadence</h3>\n                    )}\n                  </div>\n                  <div className=\"t-bottom-spacing--xl o-flex o-flex-justify--start\">\n                    <ActivityStat\n                      type=\"large\"\n                      label=\"average\"\n                      value={activityAverageCadence}\n                      unit=\"rpm\"\n                    />\n                  </div>\n                  {this.state.cadenceStream ? (\n                    <ActivityChart\n                      altitudeStream={this.state.altitudeStream}\n                      distanceStream={this.state.distanceStream}\n                      mainDataStream={this.state.cadenceStream}\n                      dataType=\"cadence\"\n                      dataTypeLegendLabel=\"Cadence\"\n                      dataTypeUnit=\"RPM\"\n                    />\n                  ) : null}\n                </div>\n              </div>\n            ) : null}\n            {/* Power Summary Card */}\n            {activityAverageWatts && activityDeviceWatts ? (\n              <div\n                id=\"activityCard--power\"\n                className=\"c-activity-graph c-activity-graph--power t-top-spacing--l\"\n              >\n                <div className=\"c-activity-graph-container\">\n                  <div className=\"o-flex o-flex-align--start\">\n                    {this.state.wattsStream && this.state.altitudeStream ? (\n                      <h3 className=\"t-bottom-spacing--xl\">\n                        Power\n                        <span className=\"c-activity-graph__header--supplementary\">\n                          {\" \"}\n                          & Elevation\n                        </span>\n                      </h3>\n                    ) : (\n                      <h3 className=\"t-bottom-spacing--xl\">Power</h3>\n                    )}\n                  </div>\n                  <div className=\"t-bottom-spacing--xl o-flex o-flex-justify--start\">\n                    <ActivityStat\n                      type=\"large\"\n                      label=\"average\"\n                      value={activityAverageWatts}\n                      unit=\"watts\"\n                    />\n                    <ActivityStat\n                      type=\"large\"\n                      label=\"max\"\n                      value={activityMaxWatts}\n                      unit=\"w\"\n                    />\n                  </div>\n                  {this.state.wattsStream ? (\n                    <ActivityChart\n                      altitudeStream={this.state.altitudeStream}\n                      distanceStream={this.state.distanceStream}\n                      mainDataStream={this.state.wattsStream}\n                      dataType=\"power\"\n                      dataTypeLegendLabel=\"Power\"\n                      dataTypeUnit=\"W\"\n                    />\n                  ) : null}\n                </div>\n              </div>\n            ) : null}\n            {/* Food Cards */}\n            {activityTotalCalories ? (\n              <div>\n                <h3 className=\"t-top-spacing--xl\">Food Burned</h3>\n                <div className=\"c-activity-food-cards t-top-spacing--l\">\n                  <ActivityFoodCard\n                    name=\"Bananas\"\n                    value={foodBurnedBanana}\n                    imageSrc=\"/img/food/banana.png\"\n                  />\n                  <ActivityFoodCard\n                    name=\"Cookies\"\n                    value={foodBurnedCookies}\n                    imageSrc=\"/img/food/cookie.png\"\n                  />\n                  <ActivityFoodCard\n                    name=\"Cheeseburgers\"\n                    value={foodBurnedCheeseburgers}\n                    imageSrc=\"/img/food/cheeseburger.png\"\n                  />\n                  <ActivityFoodCard\n                    name=\"Beers\"\n                    value={foodBurnedBeers}\n                    imageSrc=\"/img/food/beer.png\"\n                  />\n                  <ActivityFoodCard\n                    name=\"Pizza Slice\"\n                    value={foodBurnedPizzaSlice}\n                    imageSrc=\"/img/food/pizza_slice.png\"\n                  />\n                  <ActivityFoodCard\n                    name=\"Chocolate\"\n                    value={foodBurnedCadburyChocolate}\n                    imageSrc=\"/img/food/cadbury_chocolate.png\"\n                  />\n                </div>\n              </div>\n            ) : null}\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nexport default ActivityDetail;\n","import React, { Component } from \"react\";\nimport { fire } from \"../components/firebase\";\nimport { IconBookmarkSolid } from \"../components/icons/icons\";\n\nclass FavouriteButton extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isFavourite: false,\n      loading: true\n    };\n  }\n\n  checkStatus = () => {\n    let favouritesRef = fire\n      .database()\n      .ref(\"users/\" + this.props.userUid + \"/favourites\");\n    let activityId = this.props.activityId;\n\n    favouritesRef.once(\"value\", snapshot => {\n      snapshot.forEach(child => {\n        let favouriteActivityId = child.child(\"activityId\").val();\n\n        if (favouriteActivityId === activityId) {\n          console.log(\"activity is favourited\");\n          this.setState({\n            isFavourite: true\n          });\n        }\n      });\n      this.setState({ loading: false });\n    });\n  };\n\n  unfavouriteThis = () => {\n    let favouritesRef = fire\n      .database()\n      .ref(\"users/\" + this.props.userUid + \"/favourites\");\n    let activityId = this.props.activityId;\n\n    if (this.state.isFavourite) {\n      favouritesRef.once(\"value\", snapshot => {\n        snapshot.forEach(child => {\n          let favouriteActivityId = child.child(\"activityId\").val();\n\n          if (favouriteActivityId === activityId) {\n            console.log(\"remove from firebase\");\n            child.ref.remove();\n          }\n        });\n      });\n\n      this.setState({\n        isFavourite: false\n      });\n    }\n  };\n\n  favouriteThis = () => {\n    let favouritesRef = fire\n      .database()\n      .ref(\"users/\" + this.props.userUid + \"/favourites\");\n    let activityId = this.props.activityId;\n    let newFavouriteRef = favouritesRef.push();\n\n    if (!this.state.isFavourite) {\n      console.log(\"add to favourites\");\n      newFavouriteRef.set({\n        activityId: activityId,\n        activityData: this.props.data\n      });\n\n      this.setState({\n        isFavourite: true\n      });\n    }\n  };\n\n  componentDidMount() {\n    this.checkStatus();\n  }\n\n  render() {\n    if (this.state.loading) {\n      return (\n        <button\n          disabled\n          className=\"c-btn c-btn--favourite\"\n          onClick={this.favouriteThis}\n        >\n          <IconBookmarkSolid className=\"c-icon\" /> <span>Favourite</span>\n        </button>\n      );\n    } else {\n      return (\n        <div>\n          {this.state.isFavourite ? (\n            <button\n              className=\"c-btn c-btn--favourite is-favourite\"\n              onClick={this.unfavouriteThis}\n            >\n              <IconBookmarkSolid className=\"c-icon\" /> <span>Favourited</span>\n            </button>\n          ) : (\n            <button\n              className=\"c-btn c-btn--favourite\"\n              onClick={this.favouriteThis}\n            >\n              <IconBookmarkSolid className=\"c-icon\" /> <span>Favourite</span>\n            </button>\n          )}\n        </div>\n      );\n    }\n  }\n}\n\nexport default FavouriteButton;\n","import React, { Component } from \"react\";\nimport { fire } from \"../components/firebase\";\nimport { IconCloud } from \"../components/icons/icons\";\n\nclass PublishButton extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isPublic: false,\n      loading: true\n    };\n  }\n\n  checkStatus = () => {\n    let publicActivitiesRef = fire\n      .database()\n      .ref(\"users/\" + this.props.userUid + \"/publicActivities\");\n    let activityId = this.props.activityId;\n\n    publicActivitiesRef.once(\"value\", snapshot => {\n      snapshot.forEach(child => {\n        let publicActivityId = child.child(\"activityId\").val();\n\n        if (publicActivityId === activityId) {\n          console.log(\"activity is in public stream\");\n          this.setState({\n            isPublic: true\n          });\n        } else {\n          // do nothing\n        }\n      });\n      this.setState({ loading: false });\n    });\n  };\n\n  removeFromPublicStream = () => {\n    let publicActivitiesRef = fire\n      .database()\n      .ref(\"users/\" + this.props.userUid + \"/publicActivities\");\n    let activityId = this.props.activityId;\n\n    if (this.state.isPublic) {\n      publicActivitiesRef.once(\"value\", snapshot => {\n        snapshot.forEach(child => {\n          let publicActivityId = child.child(\"activityId\").val();\n\n          if (publicActivityId === activityId) {\n            console.log(\"remove from public stream\");\n            child.ref.remove();\n          }\n        });\n      });\n\n      this.setState({\n        isPublic: false\n      });\n    }\n  };\n\n  addToPublicStream = () => {\n    let publicActivitiesRef = fire\n      .database()\n      .ref(\"users/\" + this.props.userUid + \"/publicActivities\");\n    let activityId = this.props.activityId;\n    let newPublicActivity = publicActivitiesRef.push();\n\n    if (!this.state.isPublic) {\n      console.log(\"add to public stream\");\n      newPublicActivity.set({\n        activityId: activityId,\n        activityData: this.props.data,\n        altitudeStream: this.props.altitudeStream || null,\n        distanceStream: this.props.distanceStream || null,\n        latLngStream: this.props.latLngStream || null,\n        velocityStream: this.props.velocityStream || null,\n        cadenceStream: this.props.cadenceStream || null,\n        heartrateStream: this.props.heartrateStream || null,\n        wattsStream: this.props.wattsStream || null\n      });\n\n      this.setState({\n        isPublic: true\n      });\n    }\n  };\n\n  componentDidMount() {\n    this.checkStatus();\n  }\n\n  render() {\n    if (this.state.loading) {\n      return (\n        <button\n          disabled\n          className=\"c-btn c-btn--publish\"\n          onClick={this.addToPublicStream}\n        >\n          <IconCloud className=\"c-icon\" /> <span>Publish</span>\n        </button>\n      );\n    } else {\n      return (\n        <div>\n          {this.state.isPublic ? (\n            <div className=\"o-flex o-flex-align--center\">\n              <button\n                className=\"c-btn c-btn--publish is-public\"\n                onClick={this.removeFromPublicStream}\n              >\n                <IconCloud className=\"c-icon\" /> <span>Published</span>\n              </button>\n              <a\n                className=\"c-link t-left-spacing\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                href={\n                  \"/public/\" + this.props.userUid + \"/\" + this.props.activityId\n                }\n              >\n                {\" \"}\n                Open Public Link\n              </a>\n            </div>\n          ) : (\n            <button\n              className=\"c-btn c-btn--publish\"\n              onClick={this.addToPublicStream}\n            >\n              <IconCloud className=\"c-icon\" /> <span>Publish</span>\n            </button>\n          )}\n        </div>\n      );\n    }\n  }\n}\n\nexport default PublishButton;\n","import React, { Component } from \"react\";\nimport Moment from \"react-moment\";\nimport FavouriteButton from \"../components/favouriteButton\";\nimport PublishButton from \"../components/publishButton\";\n\nclass ActivityHeader extends Component {\n  render() {\n    return (\n      <div>\n        <div className=\"c-page-header\">\n          <h3 className=\"o-activity-detail-name\">{this.props.data.name}</h3>\n          <a\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n            className=\"o-activity-detail-time\"\n            href={\"https://strava.com/activities/\" + this.props.data.id}\n          >\n            <span>\n              <Moment format=\"MMM DD, YYYY\">\n                {this.props.data.start_date}\n              </Moment>\n              <span> at </span>\n              <Moment format=\"hh:mm a\">{this.props.data.start_date}</Moment>\n            </span>\n          </a>\n          <div className=\"t-top-spacing--l o-flex\">\n            <div className=\"t-right-spacing\">\n              <FavouriteButton\n                userUid={this.props.userUid}\n                activityId={this.props.activityId}\n                data={this.props.data}\n              />\n            </div>\n            <div>\n              <PublishButton\n                userUid={this.props.userUid}\n                activityId={this.props.activityId}\n                data={this.props.data}\n                altitudeStream={this.props.altitudeStream}\n                cadenceStream={this.props.cadenceStream}\n                distanceStream={this.props.distanceStream}\n                heartrateStream={this.props.heartrateStream}\n                wattsStream={this.props.wattsStream}\n                latLngStream={this.props.latLngStream}\n                velocityStream={this.props.velocityStream}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ActivityHeader;\n","import React, { Component } from \"react\";\nimport Moment from \"react-moment\";\n\nclass ActivityHeaderPublic extends Component {\n  render() {\n    return (\n      <div>\n        <div className=\"c-page-header c-page-header--center-aligned\">\n          <AthleteProfile athleteData={this.props.athleteData} />\n          <h3 className=\"o-activity-detail-name\">{this.props.data.name}</h3>\n          <a\n            rel=\"noopener noreferrer\"\n            target=\"_blank\"\n            className=\"o-activity-detail-time\"\n            href={\"https://strava.com/activities/\" + this.props.data.id}\n          >\n            <span>\n              <Moment format=\"MMM DD, YYYY\">\n                {this.props.data.start_date}\n              </Moment>\n              <span> at </span>\n              <Moment format=\"hh:mm a\">{this.props.data.start_date}</Moment>\n            </span>\n          </a>\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction AthleteProfile(props) {\n  return (\n    <div className=\"c-athlete-profile\">\n      <img\n        alt=\"profile\"\n        src={props.athleteData.profile}\n        className=\"c-athlete-profile__image\"\n      />\n    </div>\n  );\n}\n\nexport default ActivityHeaderPublic;\n","import React, { Component } from \"react\";\nimport { ActivityStat } from \"../components/activity\";\nimport MomentJS from \"moment\";\nimport _ from \"lodash\";\nimport LoadingSpinner from \"../components/loader\";\nimport ActivityChart from \"../components/chart\";\nimport MapboxMap from \"../components/mapbox\";\nimport { fire } from \"../components/firebase\";\nimport ActivityFoodCard from \"../components/foodCard\";\nimport ActivityHeaderPublic from \"../components/activityHeaderPublic\";\n\nlet activityDistance;\nlet activityTotalElevationGain;\nlet activityTotalCalories;\nlet activityMovingTime;\nlet activityMovingTimeHour;\nlet activityMovingTimeMinutes;\nlet activityMovingTimeSeconds;\nlet activityMovingTimeHHMMSS;\n\nlet activityAverageSpeed;\nlet activityMaxSpeed;\nlet activityAverageCadence;\nlet activityAverageHeartRate;\nlet activityAverageWatts;\nlet activityMaxWatts;\nlet activityMaxHeartRate;\nlet activityDeviceWatts;\n\nlet foodBurnedBanana;\nlet foodBurnedBeers;\nlet foodBurnedCookies;\nlet foodBurnedCheeseburgers;\nlet foodBurnedCadburyChocolate;\nlet foodBurnedPizzaSlice;\n\nlet publicAccessToken = \"011c89ee01402ab591de0240d59ee84455fd4d42\";\n\nclass PublicActivityDetail extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: [],\n      loading: true,\n      athleteId: props.match.params.athlete,\n      activityId: props.match.params.activity,\n      activityFound: false,\n      athleteData: {}\n    };\n  }\n\n  componentDidMount() {\n    let athleteUID = this.props.match.params.athleteUID;\n    let activityId = this.props.match.params.activity;\n    let publicActivitiesRef = fire\n      .database()\n      .ref(\"users/\" + athleteUID + \"/publicActivities\");\n\n    publicActivitiesRef.once(\"value\", snap => {\n      snap.forEach(child => {\n        let publicActivityId = child.child(\"activityId\").val();\n        let publicActivityData = child.child(\"activityData\").val();\n        let publicActivityAltitudeStream =\n          child.child(\"altitudeStream\").val() || null;\n        let publicActivityCadenceStream =\n          child.child(\"cadenceStream\").val() || null;\n        let publicActivityDistanceStream =\n          child.child(\"distanceStream\").val() || null;\n        let publicActivityHeartrateStream =\n          child.child(\"heartrateStream\").val() || null;\n        let publicActivityLatLngStream =\n          child.child(\"latLngStream\").val() || null;\n        let publicActivityVelocityStream =\n          child.child(\"velocityStream\").val() || null;\n        let publicActivityWattsStream =\n          child.child(\"wattsStream\").val() || null;\n\n        if (publicActivityId === activityId) {\n          this.fetchAthleteData(publicActivityData.athlete.id);\n          this.setState({\n            data: publicActivityData,\n            altitudeStream: publicActivityAltitudeStream,\n            cadenceStream: publicActivityCadenceStream,\n            distanceStream: publicActivityDistanceStream,\n            heartrateStream: publicActivityHeartrateStream,\n            latLngStream: publicActivityLatLngStream,\n            velocityStream: publicActivityVelocityStream,\n            wattsStream: publicActivityWattsStream,\n            loading: false,\n            activityFound: true\n          });\n        } else {\n          // do nothing\n          this.setState({\n            loading: false\n          });\n        }\n      });\n    });\n  }\n\n  fetchAthleteData = id => {\n    let athleteApiUrl = \"https://www.strava.com/api/v3/athletes/\" + id;\n\n    fetch(athleteApiUrl, {\n      method: \"get\",\n      headers: {\n        \"content-type\": \"application/json\",\n        authorization: \"Bearer \" + publicAccessToken\n      }\n    })\n      .then(res => {\n        return res.json();\n      })\n      .then(json => {\n        this.setState({\n          athleteData: json\n        });\n      });\n  };\n\n  render() {\n    // Distance\n    activityDistance = _.round(this.state.data.distance / 1000, 1);\n    // Climb\n    activityTotalElevationGain = _.round(\n      this.state.data.total_elevation_gain,\n      0\n    );\n    // Calories\n    activityTotalCalories = this.state.data.calories;\n\n    // Duration\n    activityMovingTime = MomentJS.duration(\n      this.state.data.moving_time,\n      \"seconds\"\n    );\n    activityMovingTimeHour = activityMovingTime._data.hours;\n    activityMovingTimeMinutes = activityMovingTime._data.minutes;\n    activityMovingTimeSeconds = activityMovingTime._data.seconds;\n    activityMovingTimeHHMMSS =\n      activityMovingTimeHour +\n      \":\" +\n      activityMovingTimeMinutes +\n      \":\" +\n      activityMovingTimeSeconds;\n\n    // Average Speed\n    activityAverageSpeed = _.round(\n      (this.state.data.average_speed * 60 * 60) / 1000,\n      1\n    );\n    activityMaxSpeed = _.round((this.state.data.max_speed * 60 * 60) / 1000, 1);\n\n    // Cadence\n    activityAverageCadence = _.round(this.state.data.average_cadence, 1);\n\n    // Watts\n    activityAverageWatts = _.round(this.state.data.average_watts, 1);\n    activityMaxWatts = this.state.data.max_watts;\n    activityDeviceWatts = this.state.data.device_watts;\n\n    // Heart Rate\n    activityAverageHeartRate = this.state.data.average_heartrate;\n    activityMaxHeartRate = this.state.data.max_heartrate;\n\n    // Food Burned\n    foodBurnedBanana = _.round(activityTotalCalories / 90, 1);\n    foodBurnedBeers = _.round(activityTotalCalories / 208, 1);\n    foodBurnedCookies = _.round(activityTotalCalories / 50, 1);\n    foodBurnedCheeseburgers = _.round(activityTotalCalories / 303, 1);\n    foodBurnedCadburyChocolate = _.round(activityTotalCalories / 240, 1);\n    foodBurnedPizzaSlice = _.round(activityTotalCalories / 272, 1);\n\n    if (this.state.loading) {\n      return (\n        <div className=\"o-flex o-flex-align--center o-flex-justify--center\">\n          <LoadingSpinner />\n        </div>\n      );\n    } else if (!this.state.loading && this.state.activityFound) {\n      return (\n        <div className=\"o-wrapper o-activity-detail\">\n          <ActivityHeaderPublic\n            data={this.state.data}\n            athleteData={this.state.athleteData}\n          />\n          <div className=\"o-activity-detail__summary\">\n            <div className=\"c-activity-summary o-flex o-flex-justify--start\">\n              {activityDistance ? (\n                <ActivityStat\n                  type=\"large\"\n                  label=\"distance\"\n                  value={activityDistance}\n                  unit=\"km\"\n                />\n              ) : null}\n              {activityTotalElevationGain ? (\n                <ActivityStat\n                  type=\"large\"\n                  label=\"climb\"\n                  value={activityTotalElevationGain}\n                  unit=\"m\"\n                />\n              ) : null}\n              {activityMovingTimeHHMMSS ? (\n                <ActivityStat\n                  type=\"large\"\n                  label=\"duration\"\n                  value={activityMovingTimeHHMMSS}\n                />\n              ) : null}\n              {activityTotalCalories ? (\n                <ActivityStat\n                  type=\"large\"\n                  label=\"calories\"\n                  value={activityTotalCalories}\n                />\n              ) : null}\n            </div>\n            {this.state.data.map.summary_polyline && (\n              <MapboxMap\n                mapPolyline={\n                  this.state.data.map.polyline ||\n                  this.state.data.map.summary_polyline\n                }\n                startLatlng={this.state.data.start_latlng}\n                endLatlng={this.state.data.end_latlng}\n              />\n            )}\n          </div>\n\n          <div>\n            {/* Speed Summary Card */}\n            {activityAverageSpeed ? (\n              <div className=\"c-activity-graph c-activity-graph--velocity t-top-spacing--l\">\n                <div className=\"c-activity-graph-container\">\n                  {this.state.velocityStream && this.state.altitudeStream ? (\n                    <h3 className=\"t-bottom-spacing--xl\">\n                      Speed\n                      <span className=\"c-activity-graph__header--supplementary \">\n                        {\" \"}\n                        & Elevation\n                      </span>\n                    </h3>\n                  ) : (\n                    <h3 className=\"t-bottom-spacing--xl\">Speed</h3>\n                  )}\n                  <div className=\"t-bottom-spacing--xl o-flex o-flex-justify--start\">\n                    <ActivityStat\n                      type=\"large\"\n                      label=\"average\"\n                      value={activityAverageSpeed}\n                      unit=\"km\"\n                    />\n                    <ActivityStat\n                      type=\"large\"\n                      label=\"max\"\n                      value={activityMaxSpeed}\n                      unit=\"km\"\n                    />\n                  </div>\n                  {this.state.velocityStream ? (\n                    <ActivityChart\n                      altitudeStream={this.state.altitudeStream}\n                      distanceStream={this.state.distanceStream}\n                      mainDataStream={this.state.velocityStream}\n                      dataType=\"velocity\"\n                      dataTypeLegendLabel=\"Speed\"\n                      dataTypeUnit=\"KM/H\"\n                    />\n                  ) : null}\n                </div>\n              </div>\n            ) : null}\n            {/* Heart Rate Summary Card */}\n            {activityAverageHeartRate ? (\n              <div className=\"c-activity-graph c-activity-graph--heartrate t-top-spacing--l\">\n                <div className=\"c-activity-graph-container\">\n                  {this.state.heartrateStream && this.state.altitudeStream ? (\n                    <h3 className=\"t-bottom-spacing--xl\">\n                      Heart Rate\n                      <span className=\"c-activity-graph__header--supplementary \">\n                        {\" \"}\n                        & Elevation\n                      </span>\n                    </h3>\n                  ) : (\n                    <h3 className=\"t-bottom-spacing--xl\">Heart Rate</h3>\n                  )}\n                  <div className=\"t-bottom-spacing--xl o-flex o-flex-justify--start\">\n                    <ActivityStat\n                      type=\"large\"\n                      label=\"average\"\n                      value={activityAverageHeartRate}\n                      unit=\"bpm\"\n                    />\n                    <ActivityStat\n                      type=\"large\"\n                      label=\"max\"\n                      value={activityMaxHeartRate}\n                      unit=\"bpm\"\n                    />\n                  </div>\n                  {this.state.heartrateStream ? (\n                    <ActivityChart\n                      altitudeStream={this.state.altitudeStream}\n                      distanceStream={this.state.distanceStream}\n                      mainDataStream={this.state.heartrateStream}\n                      dataType=\"heartrate\"\n                      dataTypeLegendLabel=\"Heart Rate\"\n                      dataTypeUnit=\"BPM\"\n                    />\n                  ) : null}\n                </div>\n              </div>\n            ) : null}\n            {/* Cadence Summary Card */}\n            {activityAverageCadence ? (\n              <div className=\"c-activity-graph c-activity-graph--cadence t-top-spacing--l\">\n                <div className=\"c-activity-graph-container\">\n                  {this.state.cadenceStream && this.state.altitudeStream ? (\n                    <h3 className=\"t-bottom-spacing--xl\">\n                      Cadence\n                      <span className=\"c-activity-graph__header--supplementary \">\n                        {\" \"}\n                        & Elevation\n                      </span>\n                    </h3>\n                  ) : (\n                    <h3 className=\"t-bottom-spacing--xl\">Cadence</h3>\n                  )}\n                  <div className=\"t-bottom-spacing--xl o-flex o-flex-justify--start\">\n                    <ActivityStat\n                      type=\"large\"\n                      label=\"average\"\n                      value={activityAverageCadence}\n                      unit=\"rpm\"\n                    />\n                  </div>\n                  {this.state.cadenceStream ? (\n                    <ActivityChart\n                      altitudeStream={this.state.altitudeStream}\n                      distanceStream={this.state.distanceStream}\n                      mainDataStream={this.state.cadenceStream}\n                      dataType=\"cadence\"\n                      dataTypeLegendLabel=\"Cadence\"\n                      dataTypeUnit=\"RPM\"\n                    />\n                  ) : null}\n                </div>\n              </div>\n            ) : null}\n            {/* Power Summary Card */}\n            {activityAverageWatts && activityDeviceWatts ? (\n              <div\n                id=\"activityCard--power\"\n                className=\"c-activity-graph c-activity-graph--power t-top-spacing--l\"\n              >\n                <div className=\"c-activity-graph-container\">\n                  <div className=\"o-flex o-flex-align--start\">\n                    {this.state.wattsStream && this.state.altitudeStream ? (\n                      <h3 className=\"t-bottom-spacing--xl\">\n                        Power\n                        <span className=\"c-activity-graph__header--supplementary\">\n                          {\" \"}\n                          & Elevation\n                        </span>\n                      </h3>\n                    ) : (\n                      <h3 className=\"t-bottom-spacing--xl\">Power</h3>\n                    )}\n                  </div>\n                  <div className=\"t-bottom-spacing--xl o-flex o-flex-justify--start\">\n                    <ActivityStat\n                      type=\"large\"\n                      label=\"average\"\n                      value={activityAverageWatts}\n                      unit=\"watts\"\n                    />\n                    <ActivityStat\n                      type=\"large\"\n                      label=\"max\"\n                      value={activityMaxWatts}\n                      unit=\"w\"\n                    />\n                  </div>\n                  {this.state.wattsStream ? (\n                    <ActivityChart\n                      altitudeStream={this.state.altitudeStream}\n                      distanceStream={this.state.distanceStream}\n                      mainDataStream={this.state.wattsStream}\n                      dataType=\"power\"\n                      dataTypeLegendLabel=\"Power\"\n                      dataTypeUnit=\"W\"\n                    />\n                  ) : null}\n                </div>\n              </div>\n            ) : null}\n            {/* Food Cards */}\n            {activityTotalCalories ? (\n              <div>\n                <h3 className=\"t-top-spacing--xl\">Food Burned</h3>\n                <div className=\"c-activity-food-cards t-top-spacing--l\">\n                  <ActivityFoodCard\n                    name=\"Bananas\"\n                    value={foodBurnedBanana}\n                    imageSrc=\"/img/food/banana.png\"\n                  />\n                  <ActivityFoodCard\n                    name=\"Cookies\"\n                    value={foodBurnedCookies}\n                    imageSrc=\"/img/food/cookie.png\"\n                  />\n                  <ActivityFoodCard\n                    name=\"Cheeseburgers\"\n                    value={foodBurnedCheeseburgers}\n                    imageSrc=\"/img/food/cheeseburger.png\"\n                  />\n                  <ActivityFoodCard\n                    name=\"Beers\"\n                    value={foodBurnedBeers}\n                    imageSrc=\"/img/food/beer.png\"\n                  />\n                  <ActivityFoodCard\n                    name=\"Pizza Slice\"\n                    value={foodBurnedPizzaSlice}\n                    imageSrc=\"/img/food/pizza_slice.png\"\n                  />\n                  <ActivityFoodCard\n                    name=\"Chocolate\"\n                    value={foodBurnedCadburyChocolate}\n                    imageSrc=\"/img/food/cadbury_chocolate.png\"\n                  />\n                </div>\n              </div>\n            ) : null}\n          </div>\n        </div>\n      );\n    } else {\n      return <h1>Activity not found</h1>;\n    }\n  }\n}\n\nexport default PublicActivityDetail;\n","import React, { Component } from \"react\";\nimport Activity from \"../components/activity\";\nimport { fire } from \"../components/firebase\";\nimport LoadingSpinner from \"../components/loader\";\nimport { CSSTransitionGroup } from \"react-transition-group\";\n\nclass FavouriteActivities extends Component {\n  constructor() {\n    super();\n    this.state = {\n      data: [],\n      loading: true\n    };\n  }\n  componentDidMount() {\n    let allFavourites = [];\n\n    let favouritesRef = fire\n      .database()\n      .ref(\"users/\" + this.props.userUid + \"/favourites\");\n    favouritesRef.once(\"value\", snapshot => {\n      snapshot.forEach(child => {\n        allFavourites.push(child.val());\n      });\n      this.setState({ data: allFavourites, loading: false });\n    });\n  }\n\n  render() {\n    const activitiesData = this.state.data;\n    const activitiesDataReversed = activitiesData.reverse();\n    const activities = activitiesDataReversed.map((activity, index) => {\n      return (\n        <Activity\n          key={index}\n          data={activity.activityData}\n          mapDimension=\"400x400\"\n        />\n      );\n    });\n\n    if (!this.state.loading) {\n      return (\n        <div className=\"o-wrapper o-favourite-activities\">\n          <div className=\"c-page-header\">\n            <div className=\"o-flex o-flex-justify--start o-flex-align--center\">\n              <h1>Favourite Activities</h1>\n            </div>\n          </div>\n\n          {this.state.data.length > 0 ? (\n            <CSSTransitionGroup\n              transitionName=\"o-transition\"\n              transitionAppear={true}\n              transitionAppearTimeout={500}\n              transitionEnterTimeout={500}\n              transitionLeaveTimeout={300}\n            >\n              {activities}\n            </CSSTransitionGroup>\n          ) : (\n            <EmptyFavourites />\n          )}\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"o-flex o-flex-align--center o-flex-justify--center\">\n          <LoadingSpinner />\n        </div>\n      );\n    }\n  }\n}\n\nfunction EmptyFavourites() {\n  return (\n    <div className=\"c-empty\">\n      <p className=\"c-empty__message\">No favourite activities</p>\n      {/* <img src={ assetSrc + \"/img/how_to_favourite.png\"} /> */}\n    </div>\n  );\n}\n\nexport default FavouriteActivities;\n","import React, { Component } from \"react\";\nimport _ from \"lodash\";\nimport LoadingSpinner from \"../components/loader\";\nimport { getCookie } from \"../components/cookieHelper\";\nimport CountUp, { startAnimation } from \"react-countup\";\nimport Waypoint from \"react-waypoint\";\n\nclass YearToDate extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      loading: true,\n      data: [],\n      totals: [],\n      ytdRideTotals: {},\n      ytdRunTotals: {},\n      ytdSwimTotals: {}\n    };\n  }\n\n  componentWillMount() {\n    let userAccessToken = getCookie(\"access_token\");\n\n    fetch(\"https://www.strava.com/api/v3/athlete\", {\n      method: \"get\",\n      headers: {\n        \"content-type\": \"application/json\",\n        authorization: \"Bearer \" + userAccessToken\n      }\n    })\n      .then(function(response) {\n        return response.json();\n      })\n      .then(json => {\n        this.setState({\n          data: json\n        });\n      })\n      .then(json => {\n        let totalsApiUrl =\n          \"https://www.strava.com/api/v3/athletes/\" +\n          this.state.data.id +\n          \"/stats\";\n        fetch(totalsApiUrl, {\n          method: \"get\",\n          headers: {\n            \"content-type\": \"application/json\",\n            authorization: \"Bearer \" + userAccessToken\n          }\n        })\n          .then(function(response) {\n            return response.json();\n          })\n          .then(json => {\n            this.setState({\n              ytdRideTotals: json.ytd_ride_totals,\n              ytdRunTotals: json.ytd_run_totals,\n              ytdSwimTotals: json.ytd_swim_totals,\n              loading: false\n            });\n          });\n      });\n  }\n\n  render() {\n    let ytdRideDistance = _.round(this.state.ytdRideTotals.distance / 1000, 1);\n    let ytdRideElevationGain = _.round(\n      this.state.ytdRideTotals.elevation_gain,\n      1\n    );\n    let ytdRideMovingTime = _.round(\n      this.state.ytdRideTotals.moving_time / 60 / 60,\n      1\n    );\n\n    let mountEverestUnit = _.round(\n      this.state.ytdRideTotals.elevation_gain / 8848,\n      2\n    );\n\n    if (!this.state.loading) {\n      return (\n        <div className=\"c-ytd\">\n          <div className=\"c-ytd__stats\">\n            <div className=\"c-ytd__section c-ytd__section--intro\">\n              <div className=\"c-ytd__intro\">\n                <h1 className=\"c-ytd__intro__year\">\n                  20\n                  <br />\n                  20\n                </h1>\n                <h1 className=\"c-ytd__intro__title\">\n                  Year\n                  <br />\n                  in\n                  <br />\n                  Review\n                </h1>\n              </div>\n\n              <ScrollHint />\n            </div>\n            <YearToDateStat\n              value={ytdRideDistance}\n              unit=\"kilometers\"\n              type=\"ride\"\n              title=\"This year, you clocked\"\n            />\n            <YearToDateStat\n              value={ytdRideElevationGain}\n              unit=\"meters\"\n              type=\"ride\"\n              title=\"You climbed\"\n              description={\n                \"That translates to climbing Mt Everest \" +\n                mountEverestUnit +\n                \" times!\"\n              }\n            />\n            <YearToDateStat\n              value={ytdRideMovingTime}\n              unit=\"hours\"\n              type=\"ride\"\n              title=\"You sat in the saddle for\"\n            />\n          </div>\n        </div>\n      );\n    } else {\n      return <LoadingSpinner />;\n    }\n  }\n}\n\nclass YearToDateStat extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      value: 0,\n      counted: false\n    };\n  }\n\n  _handleWaypointEnter = () => {\n    if (!this.state.counted) {\n      startAnimation(this.myCountUp);\n      this.setState({ value: this.props.value, counted: true });\n    }\n  };\n\n  render() {\n    return (\n      <div className={\"c-ytd__section c-ytd__section--\" + this.props.type}>\n        <Waypoint bottomOffset=\"20%\" onEnter={this._handleWaypointEnter} />\n        <div className=\"c-ytd__stat\">\n          <h3 className=\"c-ytd__stat__title\">{this.props.title}</h3>\n          <h1 className=\"c-ytd__stat__value\">\n            <CountUp\n              separator=\",\"\n              start={0}\n              duration={2}\n              end={this.state.value}\n              ref={countUp => {\n                this.myCountUp = countUp;\n              }}\n            />\n          </h1>\n          <h3 className=\"c-ytd__stat__unit\">{this.props.unit}</h3>\n          {this.props.description ? (\n            <h3 className=\"c-ytd__stat__description\">\n              {this.props.description}\n            </h3>\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n}\n\nfunction ScrollHint() {\n  return (\n    <svg\n      className=\"c-ytd__scroll-hint\"\n      viewBox=\"0 0 539 65\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n      <g id=\"Page-2\" stroke=\"none\" fill=\"none\" fill-rule=\"evenodd\">\n        <path\n          d=\"M144,32.2686567 C245,32.2686567 239.499145,2.70616862e-15 314.5,0 C389.500855,-3.60822483e-15 413,45.2089552 465.5,45.2089552 C518,45.2089552 539,48.5 539,56.6268657 C539,62.2089552 539,65 539,65 L-2.27373675e-13,65 C-2.27373675e-13,65 -2.27373675e-13,62.2089552 -2.27373675e-13,56.6268657 C-2.27373675e-13,36 43,32.2686567 144,32.2686567 Z\"\n          id=\"Rectangle\"\n          fill=\"#FFC236\"\n        />\n      </g>\n    </svg>\n  );\n}\n\nexport default YearToDate;\n","import React from 'react';\nimport Login from '../views/login';\n\nlet assetSrc = ''\n\nif(process.env.NODE_ENV === 'development'){\n  assetSrc = '';\n} else {\n  assetSrc = '';\n}\n\nfunction Homepage() {\n  return(\n    <div className=\"c-homepage\">\n\n        <div className=\"c-homepage__hero-message\">\n          <div>\n            <h1 className=\"c-homepage__hero-header\"><span aria-label=\"banana\"  role=\"img\">🍌</span></h1>\n            <h1 className=\"c-homepage__hero-header\">\n              <span className=\"c-homepage__logo__emoji\">banana</span>\n            </h1>\n            <p className=\"c-homepage__hero-subheader\">Visualize your Strava activities.</p>\n            <Login />\n          </div>\n        </div>\n        <div className=\"c-homepage__hero-image\">\n          <img className=\"c-homepage__hero-image__image\" alt=\"\" src={ assetSrc + \"/img/hero_image-min.png\"}/>\n        </div>\n\n    </div>\n  )\n}\n\nexport default Homepage\n","import React from 'react';\n\nlet assetSrc = ''\n\nif(process.env.NODE_ENV === 'development'){\n  assetSrc = '';\n} else {\n  assetSrc = '';\n}\n\nfunction Footer() {\n  return(\n    <footer className=\"c-footer\">\n\n        <img alt=\"\" className=\"c-footer__power-by-strava\" src={ assetSrc + \"/img/api_logo_pwrdBy_strava_horiz_white.svg\"}/>\n        <span className=\"c-footer__credits\">\n          Made by <a className=\"c-link\" href=\"https://jackylee.co\">Jacky Lee</a>\n        </span>\n\n    </footer>\n  )\n}\n\nexport default Footer\n","import React, { Component } from \"react\";\nimport \"./index.css\";\nimport { Route, Switch, Redirect } from \"react-router-dom\";\nimport { fire } from \"./components/firebase\";\nimport { getCookie } from \"./components/cookieHelper\";\n\n// Views\nimport Activities from \"./views/activities\";\nimport Nav from \"./components/nav\";\nimport HandleRedirect from \"./views/handleRedirect\";\nimport ActivityDetail from \"./views/activityDetail\";\nimport PublicActivityDetail from \"./views/publicActivityDetail\";\nimport FavouriteActivities from \"./views/favouriteActivities\";\nimport MyYear from \"./views/yearToDate\";\nimport Home from \"./views/home\";\nimport Footer from \"./components/footer\";\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      loggedIn: false,\n      userMeasurementPreference: null\n    };\n  }\n\n  componentDidMount() {\n    let userAccessToken = getCookie(\"access_token\");\n    let accessTokenExpiresAt = getCookie(\"token_expires_at\");\n    let refreshToken = getCookie(\"refresh_token\");\n\n    let currentTime = Date.now() / 1000;\n\n    if (!userAccessToken && !accessTokenExpiresAt && !refreshToken) {\n    } else if (!userAccessToken) {\n      console.log(\"fetch token\");\n      this.setState({ loggedIn: false });\n    } else if (parseInt(accessTokenExpiresAt) < currentTime) {\n      console.log(\"refresh token\");\n      this.setState({ loggedIn: false });\n    } else {\n      console.log(\"access token exists, fetch data\");\n      this.setState({ loggedIn: true });\n    }\n\n    fire.auth().onAuthStateChanged(user => {\n      if (user && userAccessToken) {\n        this.setState({\n          loggedIn: true,\n          userUid: user.uid\n        });\n      } else {\n        this.setState({ loggedIn: false });\n      }\n    });\n\n    // fetch('https://www.strava.com/api/v3/athlete', {\n    //   method: 'get',\n    //   headers: {\n    //     \"content-type\": \"application/json\",\n    //     \"authorization\": \"Bearer \" + userAccessToken\n    //   }\n    // }).then(function(response){\n    //   return response.json();\n    // }).then( json => {\n    //   this.setState({\n    //     userMeasurementPreference: json.measurement_preference\n    //   })\n    // })\n  }\n\n  render() {\n    if (this.state.loggedIn) {\n      return (\n        <div className=\"App o-app\">\n          <Nav type=\"private\" authState={this.state.loggedIn} />\n\n          <div className=\"o-content\">\n            <Switch>\n              <Route path=\"/handle_redirect\" exact component={HandleRedirect} />\n              <Route\n                path=\"/year-review\"\n                render={routeProps => (\n                  <MyYear {...routeProps} userUid={this.state.userUid} />\n                )}\n              />\n              <Route path=\"/activities/page/:page\" component={Activities} />\n              <Route\n                path=\"/activities/:id\"\n                exact\n                render={routeProps => (\n                  <ActivityDetail\n                    {...routeProps}\n                    userUid={this.state.userUid}\n                  />\n                )}\n              />\n              <Route\n                path=\"/public/:athleteUID/:activity\"\n                exact\n                component={PublicActivityDetail}\n              />\n              <Route\n                path=\"/favourites\"\n                render={routeProps => (\n                  <FavouriteActivities\n                    {...routeProps}\n                    userUid={this.state.userUid}\n                  />\n                )}\n              />\n              <Route\n                path=\"/\"\n                exact\n                render={routeProps => (\n                  <Activities {...routeProps} userUid={this.state.userUid} />\n                )}\n              />\n              <Route component={NoMatch} />\n            </Switch>\n          </div>\n          <Footer />\n        </div>\n      );\n    } else {\n      return (\n        <div className=\"App o-wrapper o-app\">\n          <div>\n            {/* <Nav type=\"public\" authState={this.state.loggedIn}/> */}\n          </div>\n\n          <div className=\"o-content\">\n            <Switch>\n              <Route path=\"/activities/page/:page\" component={Activities} />\n              <Route path=\"/2017review\" component={NoMatch} />\n              <Route path=\"/handle_redirect\" exact component={HandleRedirect} />\n              <Route path=\"/favourites\" exact component={Home} />\n              <Route\n                path=\"/public/:athleteUID/:activity\"\n                exact\n                component={PublicActivityDetail}\n              />\n              <Route path=\"/\" exact component={Home} />\n              <Route component={NoMatch} />\n            </Switch>\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nfunction NoMatch() {\n  return <Redirect to=\"/\" />;\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nReactDOM.render(\n  <Router>\n    <App/>\n  </Router>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}